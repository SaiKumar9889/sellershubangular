<div class="container-fluid" style="margin-top: 2px">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <app-apploader [Uloading]="loading" *ngIf="loading"></app-apploader>

                    <div class="col-lg-12 col-md-12 row option-alignment">
                        <!-- <div class="col-lg-3 col-sm-12 col-md-3">
              <h4 class="card-title">Sales Orders</h4>
            </div> -->

                        <div class="col-lg-12 col-sm-12 col-md-12  align-self-center text-right "
                            style="padding-right: 0px;">
                            <div class="d-flex justify-content-end align-items-center">
                                <div class="row" *ngIf="display">
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_filter"
                                        [placeholder]="'Filter By'" id="shippingcarrier" name="shippingcarrier"
                                        [data]="FilterByOptions" ngDefaultControl [(ngModel)]="filterBy"
                                        (onSelect)="onItemSelect($event)">
                                    </ng-multiselect-dropdown>
                                    <!-- <select class="col-sm-11 form-control custom-select" [(ngModel)]="filterBy"
                                        id="filterBy">
                                        <option value="0">Filter By</option>
                                        <option value="1">Pending Orders</option>
                                        <option value="2">Unshipped Orders</option>
                                        <option value="3">Prime Orders</option>
                                        <option value="4">Printed Invoices</option>
                                        <option value="5">Non Printed Invoices</option>
                                        <option value="6">In Stock Orders</option>
                                    <option value="7">Out Of Stock Orders</option>
                                    <option value="9">Processed Orders</option>
                                    <option value="0">Non Processed Orders</option>
                                        <option value="10">Printed Labels</option>
                                        <option value="11">Non Printed Labels</option>
                                    </select> -->

                                </div>
                                <div class=" row m-l-15">
                                    <select class="col-sm-6 form-control custom-select" [(ngModel)]="searchname"
                                        id="searchname">
                                        <option value="0">Search By :</option>
                                        <option value="1">SKU</option>
                                        <option value="2">Channel Reference ID</option>
                                        <option value="3">Channel</option>
                                        <option value="4">Item Id</option>
                                        <option value="5">Customer</option>
                                        <option value="6">Post Code</option>
                                    </select>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <input type="text" [(ngModel)]="searchValue2" class="form-control"
                                                id="pass3" placeholder="Enter Search Value">
                                        </div>
                                    </div>
                                </div>
                                <div class="row m-l-15">
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_channels"
                                        [placeholder]="'Select Channel'" id="shippingcarrier" name="shippingcarrier"
                                        class="dropdownwidth" [data]="channels" ngDefaultControl
                                        [(ngModel)]="channelType" (onSelect)="onChannelSelect($event)">
                                    </ng-multiselect-dropdown>
                                    <!-- <select class="form-control custom-select" [(ngModel)]="channelType"
                                        name="channelType">
                                        <option value="all" disabled>--Select Channel--</option>
                                        <option class="form-control" *ngFor="let channel of channels"
                                            value="{{channel.id}}">
                                            {{channel.type}}-{{channel.name}}</option>
                                    </select> -->
                                </div>
                                <div class="row m-l-15">
                                    <select class="form-control custom-select" [(ngModel)]="fliter" name="fliter">
                                        <option value="0" disabled>--Select Filter--</option>
                                        <option class="form-control" value="0">Sort By</option>
                                        <option class="form-control" value="1">SKU Ascending</option>
                                        <option class="form-control" value="2">SKU Descending</option>
                                        <option class="form-control" value="3">Price low to high</option>
                                        <option class="form-control" value="4">Price High to low</option>
                                        <option class="form-control" value="5">Title A-Z</option>
                                        <option class="form-control" value="6">Title Z-A</option>
                                    </select>
                                </div>
                                <button (click)="refresh()" type="button" class="btn btn-success d-lg-block m-l-15"><i
                                        class="fa fa-plus-circle"></i> Apply Filter</button>
                                <button (click)="reset()" type="button" class="btn btn-warning d-lg-block m-l-15"><i
                                        class="fa fa-refresh fa-lg">&#xf021;</i> Refresh</button>
                            </div>
                        </div>
                    </div>
                    <!-- *ngIf="orederIsSelected" -->
                    <div class="col-lg-12 col-md-12 row option-alignment">
                        <div class="col-lg-6 col-sm-12 col-md-3">
                            <div class="col-lg-12 col-sm-12 col-md-12 row m-b-5" style="padding-right: 0px;">
                                <!-- <div class="mr-1">
                  <button type="button" class="btn btn-primary"><i class="fab fa-amazon"></i> Fulfillment</button>
                </div> -->
                                <div>
                                    <div class="btn-group mr-1">
                                        <!-- <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                        <i class=" fas fa-print"></i> Generate labels
                                    </button> -->
                                        <div class="dropdown-menu animated flipInX">
                                            <a class="dropdown-item" (click)="printPDFS()"
                                                href="javascript:void(0)">Default</a>
                                            <a class="dropdown-item" (click)="modalPrintLableOpen(opt)"
                                                href="javascript:void(0)"
                                                *ngFor="let opt of allPrintLables">{{opt.mname}}</a>
                                        </div>
                                    </div>
                                    <div class="btn-group mr-1">
                                        <button type="button" class="btn btn-danger dropdown-toggle"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class=" fas fa-print"></i> Print
                                        </button>
                                        <div class="dropdown-menu animated flipInX">
                                            <div>
                                                <select [(ngModel)]="selectedPrinter" class="form-control custom-select"
                                                    (click)="$event.stopPropagation()">
                                                    <option value="0">-- Select Printer / Default PDF --</option>
                                                    <option value="{{printer.id}}" *ngFor="let printer of allPrinters">
                                                        {{printer.printerName}}
                                                    </option>
                                                </select>
                                            </div>
                                            <a (click)="printInvoice('default')" class="dropdown-item"
                                                href="javascript:void(0)">Print Invoice</a>
                                            <a href="javascript:void(0)" (click)="printPackingSlip('default')"
                                                class="dropdown-item">Packaging Slip</a>
                                            <a href="javascript:void(0)" (click)="printDuplexPrint('default')"
                                                class="dropdown-item">Duplex Print</a>
                                            <a (click)="printLabelsTest()" class="dropdown-item"
                                                href="javascript:void(0)">Print
                                                Label</a>
                                            <a (click)="printCustomLabelsTest()" class="dropdown-item"
                                                href="javascript:void(0)">Print Custom
                                                Label</a>
                                            <a (click)="printpicklist()" class="dropdown-item"
                                                href="javascript:void(0)">Print
                                                Picklist</a>
                                            <a (click)="printPackList()" class="dropdown-item"
                                                href="javascript:void(0)">Print
                                                Packlist</a>
                                            <!-- <a (click)="printInvoice('foursix')" class="dropdown-item" href="javascript:void(0)">Print 4X6</a>
                      <a (click)="printInvoice('InvoiceLabel')" class="dropdown-item" href="javascript:void(0)">Print
                        Invoice & Label</a> -->
                                        </div>
                                    </div>
                                </div>
                                <div class="mr-2">
                                    <div class="btn-group mr-1">
                                        <button type="button" class="btn btn-danger dropdown-toggle"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="far fa-sun"></i>
                                            Actions
                                        </button>
                                        <div class="dropdown-menu animated flipInX">
                                            <!-- <a (click)="confirmorderpayment()" class="dropdown-item"
                                            href="javascript:void(0)"><i class="far fa-money-bill-alt"></i> Mark as paid</a> -->
                                            <!-- <a (click)="orderProcess()" class="dropdown-item" href="javascript:void(0)"><i
                          class="fas fa-microchip"></i> Order process</a> -->
                                            <!-- <a  class="dropdown-item" (click)="onShippingMethod()"
                                            href="javascript:void(0)"><i class="fas fa-shipping-fast"></i> Add shipping method</a> -->
                                            <a (click)="openActionModal('Bulk email')" class="dropdown-item"
                                                href="javascript:void(0)"><i class="far fa-envelope"></i> Bulk email</a>
                                            <a (click)="openActionModal('Ship orders')" class="dropdown-item"
                                                href="javascript:void(0)"><i class="fas fa-shipping-fast"></i> Ship
                                                orders</a>
                                            <a (click)="viewOrderTab()" class="dropdown-item" href="javascript:void(0)"
                                                *ngIf="orederIsSelectedForEdit"><i class="fas fa-eye"></i> View
                                                order</a>
                                            <a (click)="editOrderTab()" class="dropdown-item" href="javascript:void(0)"
                                                *ngIf="orederIsSelectedForEdit"><i class="fas fa-edit"></i> Edit
                                                order</a>
                                            <a (click)="openActionModal('Notes')" class="dropdown-item"
                                                href="javascript:void(0)" *ngIf="orederIsSelectedForEdit"><i
                                                    class="fa fa-plus-circle"></i> Add Notes</a>
                                            <a (click)="openActionModal('Cancel orders')" class="dropdown-item"
                                                href="javascript:void(0)"><i class="far fa-times-circle"></i> Cancel
                                                orders</a>

                                            <!-- <a (click)="openActionModal('Create a picklist')" class="dropdown-item" href="javascript:void(0)"><i
                          class="fas fa-list"></i> Create a picklist</a>
                      <a (click)="openActionModal('Create a packlist')" class="dropdown-item" href="javascript:void(0)"><i
                          class="fas fa-cube"></i> Create a packlist</a> -->
                                            <a (click)="exportOrdersToCSV()" class="dropdown-item"
                                                href="javascript:void(0)"><i class=" fas fa-file-excel"></i> Export
                                                orders to csv</a>
                                            <!-- <a (click)="openActionModal('Fulfilment')" class="dropdown-item" href="javascript:void(0)"><i
                          class="fab fa-amazon"></i> Fulfilment</a> -->
                                            <!-- <a (click)="openMergeSwal()" class="dropdown-item" href="javascript:void(0)"><i
                                                class="fab fa-hubspot"></i> Merge Orders</a> -->
                                            <!-- <a (click)="unmergeOrder()" class="dropdown-item" href="javascript:void(0)"><i class="fab fa-usb"></i>
                        Undo Megre Orders</a> -->
                                            <!-- <a (click)="splitOrder()" class="dropdown-item" href="javascript:void(0)"><i
                                                class="fab fa-hubspot"></i> Split Order</a> -->
                                            <!-- <a (click)="undoSplitOrder()" class="dropdown-item" href="javascript:void(0)"><i
                          class="fab fa-usb"></i>
                        Undo Split Order</a> -->

                                            <a (click)="cancelLabel()" class="dropdown-item"
                                                href="javascript:void(0)"><i class="far fa-times-circle"></i> Cancel
                                                label</a>
                                        </div>
                                    </div>
                                    <!-- <button (click)="confirmorderpayment()" title="Mark as paid" type="button"
                    class="btn btn-success btn-circle"><i class="far fa-money-bill-alt"></i> </button>
                  <button (click)="orderProcess()" title="Mark as paid" type="button" class="btn btn-primary btn-circle"><i
                      class="fas fa-microchip"></i> </button>
                  <button (click)="bulkemail()" title="Bulk Email" type="button" class="btn btn-info btn-circle"><i
                      class=" far fa-envelope"></i> </button>
                  <button title="Mark as paid" type="button" class="btn btn-success btn-circle"><i
                      class="fas fa-shipping-fast"></i> </button>
                  <button title="Mark as paid" type="button" class="btn btn-info btn-circle"><i
                      class="far fa-times-circle"></i> </button>
                  <button title="Mark as paid" type="button" class="btn btn-warning btn-circle"><i class=" fas fa-list"></i>
                  </button>
                  <button title="Mark as paid" type="button" class="btn btn-danger btn-circle"><i class="fas fa-cube"></i>
                  </button>
                  <button title="Mark as paid" type="button" class="btn btn-danger btn-circle"><i
                      class=" fas fa-file-excel"></i> </button>
                  <button title="Mark as paid" type="button" class="btn btn-danger btn-circle"><i class="fab fa-amazon"></i>
                  </button>
                  <button title="Mark as paid" type="button" class="btn btn-danger btn-circle"><i class="fas fa-cube"></i>
                  </button> -->
                                </div>
                                <div class="mr-2" *ngIf="selectShippingMethod">
                                    <select class="form-control custom-select" [(ngModel)]="shippingMethod"
                                        (change)="onSelectShippingMethod($event.target.value)" name="channelType">
                                        <option disabled value="">Select Shipping Method</option>
                                        <option class="form-control" value="{{opt.mname}}"
                                            *ngFor="let opt of allPrintLables">
                                            {{opt.mname}}</option>
                                    </select>
                                </div>
                                <div class="form-group" *ngIf="shippingMethodSelected">
                                    <select [(ngModel)]="shippingservice" class="form-control custom-select"
                                        (change)="onDpdSelect($event.target.value)"
                                        *ngIf="selectedCarrier != 'RM Click & Drop'  && selectedCarrier_code != 'amazonbuyshipping' && selectedCarrier != 'Amazon Shipping'">
                                        <option disabled value="">--Select shipping method --</option>
                                        <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">{{mthd.code
                                            }}<span *ngIf="selectedCarrier_code == 'dpd'">{{' '+mthd.name }}</span>
                                        </option>
                                    </select>
                                    <select id="shippingmethod" [(ngModel)]="shippingservice"
                                        (change)="onRMSelect($event.target.value)"
                                        class="form-control custom-select mt-2"
                                        *ngIf="selectedCarrier == 'RM Click & Drop'">
                                        <option value="">Please Select</option>

                                        <option value="BPL1">ROAYL MAIL 1st CLASS</option>
                                        <option value="BPL2">ROYAL MAIL 2nd CLASS</option>
                                        <option value="CRL24">ROYAL MAIL 24</option>
                                        <option value="CRL48">ROYAL MAIL 48</option>
                                        <option value="TRS48">ROYAL MAIL TRACKED 48 </option>
                                        <option value="TRN24">ROYAL MAIL TRACKED 24</option>
                                        <option value="TPN24">TRACKED 24 </option>
                                        <option value="TPN48">TRACKED 48 </option>


                                        <option value="OLP1SF">OLP1SF-Royal Mail Signed For 1st Class</option>
                                        <option value="OLP2">OLP2-Royal Mail 2nd Class</option>
                                        <option value="OLP1">OLP1-Royal Mail 1st Class</option>
                                        <option value="OLP2SF">OLP2SF-Royal Mail Signed For 2nd Class</option>
                                        <option value="SD1OLP">SD1OLP-Royal Mail Special Delivery Guaranteed by 1pm -
                                            £500
                                            Compensation</option>
                                        <option value="SD2OLP">SD2OLP-Royal Mail Special Delivery Guaranteed by 1pm -
                                            £1000
                                            Compensation
                                        </option>
                                        <option value="SD3OLP">SD3OLP-Royal Mail Special Delivery Guaranteed by 1pm -
                                            £2500
                                            Compensation
                                        </option>
                                        <option value="TOLP24">TOLP24-TOLP24</option>
                                        <option value="TOLP24SF">TOLP24SF-TOLP24SF</option>
                                        <option value="TOLP48">TOLP48-TOLP48</option>
                                        <option value="TOLP48SF">TOLP48SF-TOLP48SF</option>
                                        <option value="IEOLP">IEOLP-International Economy</option>
                                        <option value="ISOLP">ISOLP-International Standard</option>
                                        <option value="ISIOLP">ISIOLP-International Signed - £250 Compensation</option>
                                        <option value="ITROLP">ITROLP-International Tracked - £250 Compensation</option>
                                        <option value="ITSOLP">ITSOLP-International Tracked &amp; Signed - £250
                                            Compensation
                                        </option>
                                        <option value="TPN">TPN-ROYAL MAIL TRACKED 24
                                        </option>
                                        <option value="TPS">TPS-ROYAL MAIL TRACKED 48
                                        </option>
                                        <option value="TRL">TRL-ROYAL MAIL TRACKED 48 (LBT) (HV)
                                        </option>
                                        <option value="TRM">TRM-ROYAL MAIL TRACKED 24 (LBT) (HV)
                                        </option>
                                        <option value="TRN">TRN-ROYAL MAIL TRACKED 24 (LBT)
                                        </option>
                                        <option value="TRS">TRS-ROYAL MAIL TRACKED 48 (LBT)
                                        </option>
                                        <option value="CRL">CRL-ROYAL MAIL 24\48
                                        </option>
                                    </select>

                                    <select id="shippingmethod" [(ngModel)]="shippingservice"
                                        (change)="onAmazonSelect($event.target.value)"
                                        class="form-control custom-select" *ngIf="selectedCarrier == 'Amazon Shipping'">
                                        <option value="">Please Select</option>
                                        <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">{{mthd.name}}
                                        </option>
                                    </select>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12 col-md-9  align-self-center text-right "
                            style="padding-right: 0px;">
                            <div class="d-flex justify-content-end align-items-center">
                                <button (click)="getDetailsBasedOnId()" type="button"
                                    class="btn btn-success d-lg-block m-l-15" title="Dispatch Console"><i
                                        class="fas fa-shipping-fast mr-1"></i>Dispatch Console </button>
                                <!-- <button (click)="createOrderTab()" type="button"
                                    class="btn btn-warning d-lg-block m-l-15"><i class="fa fa-plus-circle"></i> Create
                                    Order</button>
                                <button (click)="openDownloadOrders()" type="button" data-toggle="modal"
                                    data-target="#responsive-modal" class="btn btn-success d-lg-block m-l-15"><i
                                        class=" fas fa-download"></i> Download Orders</button> -->

                                <div class="m-r-5 m-l-15">
                                    <select class="form-control custom-select" [(ngModel)]="pageSize"
                                        (change)="changePageSize()">
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="75">75</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 col-sm-12 col-md-12 row">
                        <div class="col-lg-6 col-md-6 text-left ">
                            <div *ngIf="selectedItemsLength > 0">
                                <span style="font-size: 11px;font-weight: bold;"
                                    *ngIf="selectedItemsLength == 1">{{selectedItemsLength}}
                                    order selected</span>
                                <span style="font-size: 11px;font-weight: bold;"
                                    *ngIf="selectedItemsLength > 1">{{selectedItemsLength}}
                                    orders selected</span>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 text-right ">
                            <span style="font-size: 11px;font-weight: bold;">Showing {{pageSize <= collectionsize ?
                                    pageSize : collectionsize}} of {{collectionsize}} entries</span>
                        </div>
                    </div>
                    <div class="container-scroll">
                        <cdk-virtual-scroll-viewport #scrollViewport [itemSize]="50" class="list-container">
                            <table id="salesTable"
                                class="table table color-bordered-table success-bordered-table table-bordered">
                                <thead style="background: aliceblue;">
                                    <tr>
                                        <th [style.top]="inverseOfTranslation" style="z-index: 99;">
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" id="checkall-printLables"
                                                    [(ngModel)]="isAllChecked" (click)="selectall($event)"
                                                    name="checkall-printLables" class="custom-control-input checkallP">
                                                <label class="custom-control-label" for="checkall-printLables"></label>
                                            </div>
                                        </th>
                                        <th [style.top]="inverseOfTranslation">Product Image</th>
                                        <!-- <th style="min-width: 140px;">Order Date <app-sorting></app-sorting>  </th> -->
                                        <th [style.top]="inverseOfTranslation" style="min-width: 155px;">Order Id
                                            <!-- <app-filter [multipleColumns]="orderFilters"
                    (filterObj)="filterChange($event)" [isMultiple]="'false'"></app-filter> -->
                                        </th>
                                        <th [style.top]="inverseOfTranslation" style="min-width: 150px">General </th>
                                        <th [style.top]="inverseOfTranslation" style="min-width:150px">Shipping Details
                                        </th>
                                        <th [style.top]="inverseOfTranslation" style="min-width:300px">Product
                                            <!-- <app-sorting></app-sorting> &nbsp; <app-filter (filterObj)="filterChange($event)"
                    [isMultiple]="'true'" [multipleColumns]="productFilters"></app-filter> -->
                                        </th>
                                        <th [style.top]="inverseOfTranslation"
                                            style="min-width: 150px;font-size: 11px;">Qty <br>Item Total / Ship Cost
                                        </th>
                                        <!-- <th style="min-width: 110px"> <app-sorting></app-sorting>
                </th> -->
                                        <th [style.top]="inverseOfTranslation" style="min-width:300px">Ship Address</th>
                                        <!-- <th>Notes </th> -->
                                        <!-- <th>Actions</th> -->
                                    </tr>
                                </thead>
                                <tbody class="text-left" style="font-size: 11px;font-weight: 500;">
                                    <!-- labelPdfs -->
                                    <!-- [ngClass]="sale.selected?'badge-success text-white':''" -->


                                    <tr (click)="individualselection(sale)"
                                        *cdkVirtualFor="let sale of unShipped; index as i;" class="list-element"
                                        [contextMenu]="basicMenu" [contextMenuSubject]="sale">
                                        <td>
                                            <div class="custom-control custom-checkbox"
                                                *ngIf="sale.orderStatus!='Pending'">
                                                <input (change)="individualselection(sale, $event)"
                                                    [(ngModel)]="sale.selected" type="checkbox" [id]="sale.id"
                                                    [name]="sale.id" class="custom-control-input checkallP">
                                                <label class="custom-control-label" for="{{sale.id}}"></label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="zoom-gallery" (click)="logozoom()">
                                                <a [src]="sale.imageUrl" title="{{sale.title}}"> <img alt="img"
                                                        [src]="sale.imageUrl" class="img-responsive prod-img"></a>
                                            </div>
                                            <!-- <br>
                                            <a [href]="sale.imageUrl" target="_blank" *ngIf="sale.channel == 'amazon'">External image</a> -->
                                        </td>
                                        <!-- <td>{{sale.purchaseDate | date:'dd/MM/yyyy h:mm:ss'}}</td> -->
                                        <td>
                                            {{sale.purchaseDate | date:'dd/MM/yyyy H:mm:ss'}}<br> #{{sale.orderId}} <br>
                                            <span class="badge badge-success badge-pill">
                                                {{sale.khubOrderId?sale.khubOrderId:sale.channelOrderId}}</span>
                                        </td>
                                        <td>
                                            <img style="height: 15px;" class="img-responsive"
                                                [src]="getImage(sale.channel)">
                                            <img *ngIf="sale.site" class="img-responsive"
                                                [src]="getSiteImage(sale.site)">
                                            <span class="label "
                                                [ngClass]="sale.orderStatus=='Unshipped'?'label-danger':sale.orderStatus=='Pending'?'label-warning':'label-success' ">{{sale.orderStatus}}</span><br>
                                            <div class="row fa-lg m-t-5">
                                                <!--  -->
                                                <i [ngClass]="sale.invoicePrinted?'icon-space':'icon-space-notdone'"
                                                    class=" fas  fa-print"
                                                    [title]="sale.invoicePrinted?'Invoice Printed':''"></i>
                                                <i (click)="openPdfUrl(sale?.labelPdfs)"
                                                    [ngClass]="(sale?.labelPdfs?.length>0)?'icon-space':'icon-space-notdone'"
                                                    class=" fas fa-file-pdf"
                                                    [title]="sale?.labelPdfs?.length>0?'Label Generated':''"></i>
                                                <i class="fas fa-microchip"
                                                    [ngClass]="sale.microchip?'icon-space':'icon-space-notdone'"
                                                    [title]="sale.microchip?'Order processed':''"></i>
                                                <!-- <i (click)="openPdfUrl(sale.labelPdfs)" [ngClass]="sale.labelPdfs?.length > 0?'icon-space':'icon-space-notdone'"  class=" fas fa-envelope" [title]="sale.labelPrinted?'Label Generated':''"></i> -->
                                                <!-- <i class="fas fa-microchip" [ngClass]="sale.microchip?'icon-space':'icon-space-notdone'" [title]="sale.microchip?'Order processed':''"></i> -->
                                                <i class="far  fa-money-bill-alt"
                                                    [title]="(sale.paymentsStatus!=null || sale.orderStatus=='Unshipped')?'Paid':''"
                                                    [ngClass]="(sale.paymentsStatus!=null || sale.orderStatus=='Unshipped')?'icon-space':'icon-space-notdone'"></i>
                                                <!-- <i *ngIf="sale.isPrime" class="fas icon-space fa-gift" title="Prime Order"></i> -->
                                            </div>

                                            <span *ngIf="sale.khubOrderId" class="label label-warning">Merged</span><br>
                                            <!-- class="label label-info" -->
                                            <span *ngIf="sale.isPrime">
                                                <!-- Prime Order -->
                                                <img style="height: 20px;" class="img-responsive m-l-5"
                                                    src="https://khubweb.s3.us-west-1.amazonaws.com/web/2560px-Amazon_Prime_Logo.svg.png">

                                            </span>
                                            <span>
                                                <img style="height: 24px;cursor: pointer;" class="img-responsivec m-l-5"
                                                    data-toggle="tooltip" data-placement="top"
                                                    title="Shipping rule applied " src="assets/images/gear_active.png"
                                                    *ngIf="sale.shippingRuleStatus">
                                                <img style="height: 24px;cursor: pointer;" class="img-responsive m-l-5"
                                                    data-toggle="tooltip" data-placement="top"
                                                    title="Shipping rule not applied "
                                                    src="assets/images/gear_inactive.png"
                                                    *ngIf="!sale.shippingRuleStatus">
                                            </span>
                                            <br>
                                            <!-- <span *ngIf="sale.isPrime" class="label label-info">Prime Order</span><br> -->
                                            <!-- <span *ngIf="sale.khubOrderId" class="label label-warning">Split</span><br> -->

                                        </td>
                                        <td>
                                            <!-- <img style="height: 15px;" class="img-responsive"
                                                [src]="getImage(sale.channel)">
                                            <img *ngIf="sale.site" class="img-responsive"
                                                [src]="getSiteImage(sale.site)">
                                            <br><span>{{sale.channelUsername}}</span> -->
                                            <i class=" fas fa-shipping-fast" title="Shipping Method"></i> &nbsp;
                                            <span>
                                                {{sale.shippingMethod!=null &&
                                                sale.shippingMethod!=''?sale.shippingMethod:'Unknown'}}
                                            </span>
                                            <br>
                                            <span>
                                                <i class=" fas fa-tags" title="Tracking Number"></i> &nbsp;
                                                {{sale.trackingNumber}}
                                            </span>
                                            <br>
                                            LWD : {{ sale.length!}}
                                            {{sale.width}}
                                            {{sale.depth}}
                                            <br>
                                            Weight : {{sale.weight}}
                                        </td>
                                        <td>
                                            SKU : {{sale.sku}}
                                            <br> Item Id: {{sale.id}}
                                            <!-- <b> Item id :{{sale.orderItemId}} </b>
                    <br> -->
                                            <br>
                                            <b>Title: {{sale.title}}</b>
                                            <!-- <br>
                                            <b>Category: {{sale.title}}</b> -->
                                        </td>
                                        <td><span class="badge badge-info badge-pill">{{sale.quantityPurchased}} /
                                                {{sale.productTotalQty}}</span> <br>
                                            <span class="badge badge-success badge-pill">{{sale.totalPrice}}
                                                {{sale.currencyCode}} /
                                                {{sale.shippingfee}} </span>
                                        </td>
                                        <!-- <td><span class="badge badge-success badge-pill">{{sale.totalPrice}} / {{sale.shippingfee}}</span>
                  </td> -->
                                        <td style="font-size: 11px;font-weight: 500;">
                                            <span>
                                                <b><span style="color: #041a41;">Name :</span></b>{{
                                                sale.buyerName!=null && sale.buyerName!=''?sale.buyerName:'Unknown'}}
                                            </span>
                                            <br />
                                            <span>
                                                <b><span style="color: #041a41;">Email :</span>
                                                </b>{{sale.buyerEmail!=null &&
                                                sale.buyerEmail!=''?sale.buyerEmail:'Unknown'}}
                                            </span>
                                            <br />
                                            <span>
                                                <b><span style="color: #041a41;">Address :</span> </b>
                                                {{sale.shipAddress1!="null"&& sale.shipAddress1!=null &&
                                                sale.shipAddress1 !=''?sale.shipAddress1:'Unknown'}},
                                                {{sale.shipAddress2!="null" && sale.shipAddress2
                                                !=''?sale.shipAddress2:'Unknown'}}, {{sale.shipAddress3!="null" &&
                                                sale.shipAddress3
                                                !=''?sale.shipAddress3:'Unknown'}}, {{sale.shipCity!="null" &&
                                                sale.shipCity!=''?sale.shipCity:'Unknown'}}, {{sale.shipState!="null" &&
                                                sale.shipState!=''?sale.shipState:'Unknown'}}
                                                <br />
                                                <span>
                                                    <b><span style="color: #041a41;">PostCode:</span> </b>
                                                    {{sale.shipPostalCode!="null" &&
                                                    sale.shipPostalCode!=''?sale.shipPostalCode:'Unknown'}}
                                                </span>
                                                <br />
                                                <span>
                                                    <b><span style="color: #041a41;">Country:</span> </b>
                                                    {{sale.shipCountry!=null &&
                                                    sale.shipCountry!=''?sale.shipCountry:'Unknown'}}
                                                </span>
                                                <br />
                                                <span>
                                                    <b><span style="color: #041a41;">Shipping Method:</span>
                                                    </b>{{sale.shippingMethod!=null &&
                                                    sale.shippingMethod!=''?sale.shippingMethod:'Unknown'}}
                                                </span>
                                            </span>

                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </cdk-virtual-scroll-viewport>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 ">
                        </div>
                        <div class="col-lg-6 col-md-6 text-right">
                            <ngb-pagination [collectionSize]="collectionsize" [pageSize]="pageSize" [(page)]="page"
                                [maxSize]="3" [rotate]="true" [boundaryLinks]="true" (pageChange)="changespage(page);">
                            </ngb-pagination>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- <app-print-salesorders [selectedOrderData]="printInvoiceData"> </app-print-salesorders> -->

    <!-- <context-menu>
    <ng-template contextMenuItem [subMenu]="PrintSub">
      <div class="text-left dropdown-item-1">
        <h5> <i class="fas fa-print"></i> Print </h5>
      </div>
    </ng-template>
    <ng-template contextMenuItem [subMenu]="actionSub">
      <div class="text-left dropdown-item-1">
        <h5> <i class=" fas fa-sun"></i> Action </h5>
      </div>
    </ng-template>
    <ng-template contextMenuItem [subMenu]="viewSub">
      <div class="text-left dropdown-item-1">
        <h5> <i class="fas fa-eye"></i> View </h5>
      </div>
    </ng-template>
    <ng-template contextMenuItem (execute)="openActionModal('Bulk email')">
      <div class="text-left dropdown-item-1">
        <h5><i class="far fa-envelope"></i> Send Email</h5>
      </div>
    </ng-template>
    <ng-template contextMenuItem (execute)="openActionModal('Notes')">
      <div class="text-left dropdown-item-1">
        <h5> <i class="fas fa-edit"></i> Add Notes </h5>
      </div>
    </ng-template>
    <ng-template contextMenuItem (execute)="getDetailsBasedOnId()">
      <div class="text-left dropdown-item-1">
        <h5> <i class="fas fa-edit"></i> Dispatch Console </h5>
      </div>
    </ng-template>
    <context-menu #PrintSub>
      <ng-template contextMenuItem [subMenu]="InvoiceSub">
        <div class="text-left dropdown-item-1">
          <h5> Invoice </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem [subMenu]="lablesub">
        <div class="text-left dropdown-item-1">
          <h5>Label</h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="showMessage('Hi, ' + $event.sale.name)">
        <div class="text-left dropdown-item-1">
          <h5>Pick List </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openActionModal('Create a packlist')">
        <div class="text-left dropdown-item-1">
          <h5>Pack List </h5>
        </div>
      </ng-template>
    </context-menu>

    <context-menu #InvoiceSub>
      <ng-template contextMenuItem (execute)="printInvoice('default')">
        <div class="text-left dropdown-item-1">
          <h5>Default </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="printInvoice('foursix')">
        <div class="text-left dropdown-item-1">
          <h5>4X6</h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="printInvoice('InvoiceLabel')">
        <div class="text-left dropdown-item-1">
          <h5>Invoice & Label </h5>
        </div>
      </ng-template>
    </context-menu>
    <context-menu #lablesub>
      <ng-template contextMenuItem (execute)="confirmorderpayment()">
        <div class="text-left dropdown-item-1">
          <h5>Default </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="modalPrintLableOpen(ord)" *ngFor="let ord of allPrintLables">
        <div class="text-left dropdown-item-1">
          <h5>
            {{ord.name}}
          </h5>
        </div>
      </ng-template>
    </context-menu>
    <context-menu #actionSub>
      <ng-template contextMenuItem (execute)="confirmorderpayment()">
        <div class="text-left dropdown-item-1">
          <h5> <i class="far fa-money-bill-alt"></i> Mark as paid </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="orderProcess()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-microchip"></i> Order process </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="editOrderTab()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-edit"></i> Edit Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openActionModal('Cancel orders')">
        <div class="text-left dropdown-item-1">
          <h5><i class="far fa-times-circle"></i> Cancel Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openActionModal('Ship orders')">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-shipping-fast"></i> Ready to ship Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openMergeSwal()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fab fa-hubspot"></i> Merge Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="splitOrder()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fab fa-hubspot"></i> Split Order </h5>
        </div>
      </ng-template>
    </context-menu>
    <context-menu #saySubMenu>

      <ng-template contextMenuItem (execute)="confirmorderpayment()">
        <div class="text-left dropdown-item-1">
          <h5> <i class="far fa-money-bill-alt"></i> Mark as paid </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="orderProcess()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-microchip"></i> Order process </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="showMessage('Hi, ' + $event.sale.name)">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-edit"></i> Edit Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openActionModal('Cancel orders')">
        <div class="text-left dropdown-item-1">
          <h5><i class="far fa-times-circle"></i> Cancel Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="openActionModal('Ship orders')">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-shipping-fast"></i> Ready to ship Order </h5>
        </div>
      </ng-template>

      <ng-template contextMenuItem (execute)="mergeOrder()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fab fa-hubspot"></i> Merge Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="unmergeOrder()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fab fa-usb"></i> Un Merge Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="splitOrder()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fab fa-hubspot"></i> Split Order </h5>
        </div>
      </ng-template>
      <ng-template contextMenuItem (execute)="undoSplitOrder()">
        <div class="text-left dropdown-item-1">
          <h5><i class="fas fa-microchip"></i> Undo Split Order</h5>
        </div>
      </ng-template>
    </context-menu>
    <context-menu #viewSub>
      <ng-template contextMenuItem (execute)="viewOrderTab()">
        <div class="text-left dropdown-item-1">
          <h5>View Order</h5>
        </div>
      </ng-template>
     <ng-template contextMenuItem (execute)="openActionModal('Cancel orders')">
        <div class="text-left dropdown-item-1">
          <h5>Pack List </h5>
        </div>
      </ng-template>
    </context-menu>
  </context-menu>-->
</div>

<div id="ps-search-modal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="padding-left: 30%;color: rgb(255 165 0);font-weight: 400">Search Criteria
                </h2>

                <button type="button" class="close" data-dismiss="modal" (click)="modalclosed()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <div class="col-md-12 col-lg-12 row">
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <select class="form-control custom-select" aria-placeholder="filter By">
                                <option value="">Male</option>
                                <option value="">Female</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">First Name</label>
                            <input type="text" id="firstName" class="form-control" placeholder="John doe">
                        </div>
                    </div>

                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn waves-effect waves-light btn-success">Save</button>
                <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="ps-download-orders" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="color: rgb(255 165 0);font-weight: 400">Refresh orders from following
                    channels
                </h2>

                <button type="button" class="close" data-dismiss="modal" (click)="modalDownloadOrdersclosed()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body" style="min-height: 70vh;max-height: 70vh;overflow-y: scroll;">
                <div class="table-responsive">
                    <table class="table table color-bordered-table success-bordered-table">
                        <thead>
                            <th class="text-left" style="width: 40%;">
                                Channel
                            </th>
                            <th style="width: 40%;">
                                Name
                            </th>
                            <th>
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" id="checkalld" name="checkalld"
                                        class="custom-control-input checkallPd">
                                    <label (click)="selectallchannel($event)" class="custom-control-label"
                                        for="checkalld"></label>
                                </div>
                            </th>
                        </thead>
                        <tbody>
                            <tr *ngFor="let sale of allDownloadChannels;let i=index">

                                <td class="text-left"><img [src]="getImage(sale.type)" class="img-responsive1 prod-img">
                                </td>

                                <td>{{sale.name}}</td>
                                <td>
                                    <div class="custom-control custom-checkbox">
                                        <input (click)="individualselectionchannel(sale)" [checked]="sale.selected"
                                            type="checkbox" [id]="sale.id" [value]="sale.selected" [name]="test"
                                            class="custom-control-input checkallP">
                                        <label class="custom-control-label" for="{{sale.id}}"></label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="form-group">
                    <select (change)="durationChange()" [(ngModel)]="timePeriod" class="form-control custom-select"
                        aria-placeholder="filter By">
                        <option disabled value="">Please Select Duration</option>
                        <option value="-1">Last One Day</option>
                        <option value="-7">Last 7 Day</option>
                        <option value="-14">Last 14 Day</option>
                        <option value="-28">Last 30 Day</option>
                    </select>
                </div>
                <button (click)="SaveDownloadOrders()" *ngIf="isSaveEnable" type="button"
                    class="btn waves-effect waves-light btn-success">Re-Download Orders</button>
                <button type="button" class="btn btn-danger waves-effect" (click)="modalDownloadOrdersclosed()"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="ps-dispatch-orders" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="color: rgb(255 165 0);font-weight: 400">Dispatch Console</h2>

                <button type="button" class="close" data-dismiss="modal" (click)="modalDispatchclosed()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs customtab2" role="tablist">
                    <li class="nav-item"> <a class="nav-link active" data-toggle="tab"
                            (click)="batchOrderId = false; byOrderId = true;byBarcode = false;" role="tab"
                            aria-selected="false"><span class="hidden-sm-up"></span> <span class="hidden-xs-down">By
                                Order Id</span></a>
                    </li>
                    <li class="nav-item"> <a class="nav-link pointer" data-toggle="tab"
                            (click)="batchOrderId = true; byOrderId = false;byBarcode = false;" role="tab"
                            aria-selected="false"><span class="hidden-sm-up"></span> <span class="hidden-xs-down">Batch
                                Process by Order Id</span></a> </li>
                    <!-- <li class="nav-item"> <a class="nav-link pointer" data-toggle="tab"
                            (click)="batchOrderId = false; byOrderId = false;byBarcode = true;" role="tab"
                            aria-selected="false"><span class="hidden-sm-up"></span> <span class="hidden-xs-down">By
                                Item Barcode</span></a> </li> -->

                </ul>
                <div class="tab-content">
                    <div class="tab-pane active p-20" *ngIf="!batchOrderId && !byBarcode && byOrderId " role="tabpanel">
                        <!-- <app-apploader [Uloading]="loading" *ngIf="isEdit && loading"></app-apploader> -->
                        <div *ngIf="!searchDetails">
                            <div class="col-md-6 col-lg-6 col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">Search By SellersHub Order ID</label>
                                    <input [(ngModel)]="dispatch_order_id" type="text" id="firstName"
                                        class="form-control">
                                </div>
                                <!-- <h4>(Or)</h4> -->
                                <!-- <div class="form-group">
              <label class="control-label">By Item Barcode</label>
              <input [(ngModel)]="dispatch_bar_code" type="text" id="firstName" class="form-control">
            </div> -->
                            </div>
                            <div class="col-md-6 col-lg-6 col-sm-6 text-right">
                                <button type="button" class=" btn btn-success waves-effect" (click)="getDetails()"><i
                                        class=" fas fa-search"></i> Search </button>
                            </div>
                        </div>
                        <div *ngIf="searchDetails">
                            <div class="col-md-12 col-lg-12 col-sm-12 row" style="background-color: gainsboro;">
                                <div class="col-md-3 col-lg-3 col-sm-3 mt-2">
                                    <div class="form-group">
                                        <label>Process Order :</label>
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-3 col-sm-3 mt-2">
                                    <div class="form-group">
                                        {{onGoingOrderDet?.currentSale[0]?.orderId}}
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-3 col-sm-3 mt-2">
                                    <div class="form-group">
                                        {{onGoingOrderDet?.currentSale[0]?.channelOrderId}}
                                    </div>
                                </div>
                                <div class="col-md-3 col-lg-3 col-sm-3 mt-2">
                                    <div class="form-group">
                                        <span class="label "
                                            [ngClass]="onGoingOrderDet?.currentSale[0]?.paymentsStatus!=null || onGoingOrderDet?.currentSale[0].orderStatus=='Unshipped'? 'label-success' :'' ">Paid</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 col-lg-12 col-sm-12 row mt-2">
                                <div class="col-md-3 col-lg-3 col-sm-3">
                                    <div class="form-group">
                                        <label>Shipping Address :</label>
                                        <textarea class="form-control" rows="8">
                    {{onGoingOrderDet?.currentSale[0]?.shipAddress1}},
                    {{onGoingOrderDet?.currentSale[0]?.shipAddress2}},
                    {{onGoingOrderDet?.currentSale[0]?.shipAddress3}},
                    {{onGoingOrderDet?.currentSale[0]?.shipCity}},
                    {{onGoingOrderDet?.currentSale[0]?.shipCountry}},
                    {{onGoingOrderDet?.currentSale[0]?.shipPostalCode}},
                    {{onGoingOrderDet?.currentSale[0]?.shipPhoneNumber}}
                </textarea>
                                    </div>
                                </div>
                                <div class="col-md-9 col-lg-9 col-sm-9">
                                    <div class="col-md-12 col-lg-12 col-sm-12 row">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Shipping Courier : </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6">
                                            <select class="form-control custom-select" [(ngModel)]="shippingCarrier_v2"
                                                (change)="onDCShippingMethod($event.target.value)" (blur)="mapData2()"
                                                name="channelType">
                                                <option disabled value="">Select Shipping Method</option>
                                                <option class="form-control" value="{{opt.mname}}"
                                                    *ngFor="let opt of PrintLables">
                                                    {{opt.mname}}</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <input type="text" id="firstName" class="form-control" (blur)="mapData2()"
                                                [(ngModel)]="shippingCarrier_v2">
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-lg-12 col-sm-12 row">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Shipping Method : </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6">
                                            <select [(ngModel)]="shippingMethod_v2" class="form-control custom-select"
                                                (change)="onDCDpdSelect($event.target.value)" (blur)="mapData2()"
                                                *ngIf="selectedCarrier != 'RM Click & Drop'  && selectedCarrier != 'FedEx'  && selectedCarrier != 'DHL' && selectedCarrier_code != 'amazonbuyshipping' && selectedCarrier != 'Amazon Shipping'">
                                                <option disabled value="">--Select shipping method --</option>
                                                <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">
                                                    {{mthd.code
                                                    }}<span *ngIf="selectedCarrier_code == 'dpd'">{{' '+mthd.name
                                                        }}</span>
                                                </option>
                                            </select>
                                            <select id="shippingmethod" [(ngModel)]="shippingMethod_v2"
                                                (blur)="mapData2()" (change)="onDCRMSelect($event.target.value)"
                                                class="form-control custom-select mt-2"
                                                *ngIf="selectedCarrier == 'RM Click & Drop'">
                                                <option value="">Please Select</option>

                                                <option value="BPL1">ROAYL MAIL 1st CLASS</option>
                                                <option value="BPL2">ROYAL MAIL 2nd CLASS</option>
                                                <option value="CRL24">ROYAL MAIL 24</option>
                                                <option value="CRL48">ROYAL MAIL 48</option>
                                                <option value="TRS48">ROYAL MAIL TRACKED 48 </option>
                                                <option value="TRN24">ROYAL MAIL TRACKED 24</option>
                                                <option value="TPN24">TRACKED 24 </option>
                                                <option value="TPN48">TRACKED 48 </option>


                                                <option value="OLP1SF">OLP1SF-Royal Mail Signed For 1st Class</option>
                                                <option value="OLP2">OLP2-Royal Mail 2nd Class</option>
                                                <option value="OLP1">OLP1-Royal Mail 1st Class</option>
                                                <option value="OLP2SF">OLP2SF-Royal Mail Signed For 2nd Class</option>
                                                <option value="SD1OLP">SD1OLP-Royal Mail Special Delivery Guaranteed by
                                                    1pm -
                                                    £500
                                                    Compensation</option>
                                                <option value="SD2OLP">SD2OLP-Royal Mail Special Delivery Guaranteed by
                                                    1pm -
                                                    £1000
                                                    Compensation
                                                </option>
                                                <option value="SD3OLP">SD3OLP-Royal Mail Special Delivery Guaranteed by
                                                    1pm -
                                                    £2500
                                                    Compensation
                                                </option>
                                                <option value="TOLP24">TOLP24-TOLP24</option>
                                                <option value="TOLP24SF">TOLP24SF-TOLP24SF</option>
                                                <option value="TOLP48">TOLP48-TOLP48</option>
                                                <option value="TOLP48SF">TOLP48SF-TOLP48SF</option>
                                                <option value="IEOLP">IEOLP-International Economy</option>
                                                <option value="ISOLP">ISOLP-International Standard</option>
                                                <option value="ISIOLP">ISIOLP-International Signed - £250 Compensation
                                                </option>
                                                <option value="ITROLP">ITROLP-International Tracked - £250 Compensation
                                                </option>
                                                <option value="ITSOLP">ITSOLP-International Tracked &amp; Signed - £250
                                                    Compensation
                                                </option>
                                                <option value="TPN">TPN-ROYAL MAIL TRACKED 24
                                                </option>
                                                <option value="TPS">TPS-ROYAL MAIL TRACKED 48
                                                </option>
                                                <option value="TRL">TRL-ROYAL MAIL TRACKED 48 (LBT) (HV)
                                                </option>
                                                <option value="TRM">TRM-ROYAL MAIL TRACKED 24 (LBT) (HV)
                                                </option>
                                                <option value="TRN">TRN-ROYAL MAIL TRACKED 24 (LBT)
                                                </option>
                                                <option value="TRS">TRS-ROYAL MAIL TRACKED 48 (LBT)
                                                </option>
                                                <option value="CRL">CRL-ROYAL MAIL 24\48
                                                </option>
                                            </select>
                                            <select id="shippingmethod" [(ngModel)]="shippingMethod_v2"
                                                (change)="onDCFedSelect($event.target.value)" (blur)="mapData2()"
                                                class="form-control custom-select" *ngIf="selectedCarrier == 'FedEx'">
                                                <option value="">Please Select</option>

                                                <option value="EFIP">EUROPE_FIRST_INTERNATIONAL_PRIORITY</option>
                                                <option value="F1DF">FEDEX_1_DAY_FREIGHT</option>
                                                <option value="F2DY">FEDEX_2_DAY</option>
                                                <option value="F2DA">FEDEX_2_DAY_AM</option>
                                                <option value="F2DF">FEDEX_2_DAY_FREIGHT </option>
                                                <option value="F3DF">FEDEX_3_DAY_FREIGHT</option>
                                                <option value="FDDF">FEDEX_DISTANCE_DEFERRED </option>
                                                <option value="FESV">FEDEX_EXPRESS_SAVER </option>


                                                <option value="FFFR">FEDEX_FIRST_FREIGHT</option>
                                                <option value="FFEC">FEDEX_FREIGHT_ECONOMY</option>
                                                <option value="FFPT">FEDEX_FREIGHT_PRIORITY</option>
                                                <option value="FGRD">FEDEX_GROUND</option>
                                                <option value="FNDA">FEDEX_NEXT_DAY_AFTERNOON</option>
                                                <option value="NDEM">FEDEX_NEXT_DAY_EARLY_MORNING
                                                </option>
                                                <option value="NDED">FEDEX_NEXT_DAY_END_OF_DAY
                                                </option>
                                                <option value="FNDF">FEDEX_NEXT_DAY_FREIGHT</option>
                                                <option value="NDMM">FEDEX_NEXT_DAY_MID_MORNING</option>
                                                <option value="FOVN">FIRST_OVERNIGHT</option>
                                                <option value="GHDY">GROUND_HOME_DELIVERY</option>
                                                <option value="INEC">INTERNATIONAL_ECONOMY</option>
                                                <option value="INEF">INTERNATIONAL_ECONOMY_FREIGHT</option>
                                                <option value="IFST">INTERNATIONAL_FIRST</option>
                                                <option value="INPT">INTERNATIONAL_PRIORITY</option>
                                                <option value="INPF">INTERNATIONAL_PRIORITY_FREIGHT
                                                </option>
                                                <option value="PONT">PRIORITY_OVERNIGHT</option>
                                                <option value="SDAY">SAME_DAY</option>
                                                <option value="SDCT">SAME_DAY_CITY</option>
                                                <option value="SPST">SMART_POST</option>
                                                <option value="SOVN">STANDARD_OVERNIGHT</option>

                                            </select>
                                            <select id="shippingmethod" [(ngModel)]="shippingMethod_v2"
                                                (change)="onDCDhlSelect($event.target.value)" (blur)="mapData2()"
                                                class="form-control custom-select" *ngIf="selectedCarrier == 'DHL'">
                                                <option value="">Please Select</option>

                                                <option value="N">DOM - DHL DOMESTIC EXPRESS (UK to UK)</option>
                                                <option value="1">DOT - DHL DOMESTIC EXPRESS 12:00</option>
                                                <option value="I">DOK - DHL DOMESTIC EXPRESS 9:00</option>
                                                <option value="H">ESI - DHL Economy Select (nondoc)</option>
                                                <option value="D">DOX - DHL Express Worldwide (International
                                                    non-dutiable shipment - documents) </option>
                                                <option value="P">WPX -DHL Express Worldwide (NON DOC International
                                                    dutiable shipment)</option>
                                                <option value="8">TD -EXPRESS EASY </option>
                                                <option value="P">TD - DHL Express Worldwide (nondoc) </option>


                                                <option value="E">TDE - DHL Express 09:00 (nondoc)</option>
                                                <option value="Y">TD - EXPRESS 12:00</option>
                                                <option value="Q">TD - MEDICAL EXPRESS</option>

                                            </select>
                                            <select id="shippingmethod" [(ngModel)]="shippingMethod_v2"
                                                (blur)="mapData2()" (change)="onDCAmazonSelect($event.target.value)"
                                                class="form-control custom-select"
                                                *ngIf="selectedCarrier == 'Amazon Shipping'">
                                                <option value="">Please Select</option>
                                                <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">
                                                    {{mthd.name}}
                                                </option>
                                                <!-- <option value="Amazon Shipping One Day">Amazon Shipping One Day</option> -->
                                            </select>
                                        </div>
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <input type="text" id="firstName" class="form-control" (blur)="mapData2()"
                                                [(ngModel)]="shippingMethod_v2">
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-lg-12 col-sm-12 row mt-2">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Tracking Number :</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6">
                                            <div class="form-group">
                                                <input type="text" id="firstName" class="form-control"
                                                    (blur)="mapData2()" [(ngModel)]="trackNumber">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="col-md-12 col-lg-12 col-sm-12 row mt-2">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Dimensions :</label>
                                                <sub>(Length,Width,Depth,Weight)</sub>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6 mt-2">
                                            {{dclength}} * {{dcwidth}} * {{dcheight}} * {{dcweight}}
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-md-12 col-lg-12 col-sm-12 row mt-2">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Scan bar code and verify :</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6">
                                            <div class="form-group">
                                                <select class="form-control custom-select" aria-placeholder="filter By"
                                                    [(ngModel)]="dcscan">
                                                    <option value="">SKU</option>
                                                    <option value="">UPC/EAN</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-md-12 col-lg-12 col-sm-12 row mt-2">
                                        <div class="col-md-3 col-lg-3 col-sm-3">
                                            <div class="form-group">
                                                <label class="control-label">Default Shipping Courier :</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-sm-6">
                                            <div class="form-group">
                                                <input type="text" id="firstName" class="form-control">
                                            </div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table color-bordered-table success-bordered-table">
                                    <thead class="text-center">
                                        <th>
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" id="checkall" name="checkall"
                                                    [(ngModel)]="isAllOrdersChecked" (click)="selectallOrders($event)"
                                                    class="custom-control-input checkallP">
                                                <label (click)="selectall($event)" class="custom-control-label"
                                                    for="checkall"></label>
                                            </div>
                                        </th>
                                        <th>Image</th>
                                        <th>Title</th>
                                        <th>SKU </th>
                                        <th>Channel</th>
                                        <th>Quantity</th>
                                        <th style="min-width: 90px;">Weight(KG)</th>
                                        <th style="min-width: 90px;">Length(cm)</th>
                                        <th style="min-width: 90px;">Depth(cm)</th>
                                        <th style="min-width: 90px;">Width(cm)</th>
                                    </thead>
                                    <tbody class="text-center">
                                        <tr *ngFor="let sale of onGoingOrderDet?.currentSale;let i=index">
                                            <td>
                                                <!-- <div class="custom-control custom-checkbox">
                                                    <input [(ngModel)]="sale.selected"
                                                        (change)="individualselectOrders(sale, $event)" type="checkbox"
                                                        [id]="'DS'+sale.id"
                                                        class="custom-control-input checkallP">
                                                    <label class="custom-control-label" for="{{'DS'+sale.id}}"></label> -->
                                                <label class="custom-control custom-checkbox m-b-0">
                                                    <input (click)="individualselectOrders(sale)"
                                                        [checked]="sale.selected" type="checkbox"
                                                        class="custom-control-input">
                                                    <span class="custom-control-label"></span>
                                                </label>
                                                <!-- </div> -->
                                            </td>
                                            <td>
                                                <div>
                                                    <img alt="img" [src]="sale.imageUrl"
                                                        class="img-responsive prod-img">
                                                </div>
                                                <!-- <br>
                                    <a [href]="sale.imageUrl" target="_blank" *ngIf="sale.channel == 'amazon'">External image</a> -->
                                            </td>
                                            <td>{{sale.title}}</td>
                                            <td>{{sale.sku}}</td>
                                            <td>{{sale.channel}}</td>
                                            <td>{{sale.quantityPurchased}}</td>
                                            <td>
                                                <input [(ngModel)]="sale.weight" [name]="sale.id+'price'" type="text"
                                                    class="form-control text-center" [id]="sale.id+'quan'">
                                            </td>
                                            <td>
                                                <input [(ngModel)]="sale.length" [name]="sale.id+'price'" type="text"
                                                    class="form-control text-center" [id]="sale.id+'quan'">
                                            </td>
                                            <td>
                                                <input [(ngModel)]="sale.depth" [name]="sale.id+'price'" type="text"
                                                    class="form-control text-center" [id]="sale.id+'quan'">
                                            </td>
                                            <td>
                                                <input [(ngModel)]="sale.width" [name]="sale.id+'price'" type="text"
                                                    class="form-control text-center" [id]="sale.id+'quan'">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- <div class="col-md-12 col-lg-12 text-right row m-t-15">
                                <div class="col-md-4 col-lg-4">
                                    <h4>Total Orders : {{totalOrders}}</h4>
                                </div>
                                <div class="col-md-4 col-lg-4">
                                    <h4>Dispatched Orders : {{dispatchedOrders}}</h4>
                                </div>
                                <div class="col-md-4 col-lg-4">
                                    <h4>Remaining Orders : {{remainingOrders}}</h4>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class=" p-20" *ngIf="batchOrderId && !byBarcode && !byOrderId " role="tabpanel">
                        <div class="col-md-6 col-lg-6 col-sm-6">
                            <div class="form-group">
                                <label class="control-label">Search By Order ID</label>
                                <input [(ngModel)]="batch_order_id" type="text" id="firstName" class="form-control">
                            </div>
                            <!-- <h4>(Or)</h4> -->
                            <!-- <div class="form-group">
            <label class="control-label">By Item Barcode</label>
            <input [(ngModel)]="dispatch_bar_code" type="text" id="firstName" class="form-control">
            </div> -->
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-6 text-right">
                            <button type="button" class=" btn btn-success waves-effect" (click)="getOrderDetails()"><i
                                    class=" fas fa-search"></i> Scan and Proceed </button>
                        </div>
                    </div>
                    <div class=" p-20" *ngIf="!batchOrderId && byBarcode && !byOrderId " role="tabpanel">
                        <div class="col-md-6 col-lg-6 col-sm-6">
                            <div class="form-group">
                                <label class="control-label">Search By Item Barcode</label>
                                <input [(ngModel)]="dispatch_order_id" type="text" id="firstName" class="form-control">
                            </div>
                            <!-- <h4>(Or)</h4> -->
                            <!-- <div class="form-group">
            <label class="control-label">By Item Barcode</label>
            <input [(ngModel)]="dispatch_bar_code" type="text" id="firstName" class="form-control">
            </div> -->
                        </div>
                        <div class="col-md-6 col-lg-6 col-sm-6 text-right">
                            <button type="button" class=" btn btn-success waves-effect" (click)="getDetails()"><i
                                    class=" fas fa-search"></i> Search </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" *ngIf="searchDetails">
                <button type="button" (click)="dcSplitOrder()" class="btn waves-effect waves-light btn-success">Split
                    Order</button>
                <button type="button" (click)="dcPrintInvoice('default')"
                    class="btn waves-effect waves-light btn-success">Print invoice</button>
                <div class="btn-group mr-1 m-l-15">
                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown"
                        title="Print Label" aria-haspopup="true" aria-expanded="false">
                        <i class=" fas fa-print"></i>Print Label
                    </button>
                    <div class="dropdown-menu animated flipInX">
                        <!-- <div>
                            <select [(ngModel)]="selectedPrinter" class="form-control custom-select"
                                (click)="$event.stopPropagation()"
                                *ngIf="selectedCarrier != 'RM Click & Drop'  && selectedCarrier_code != 'amazonbuyshipping' && selectedCarrier != 'Amazon Shipping'">
                                <option value="0">--Select Printer --</option>
                                <option value="{{printer.id}}" *ngFor="let printer of allPrinters">
                                    {{printer.printerName}}
                                </option>
                            </select>
                        </div> -->
                        <a class="dropdown-item" (click)="printPDFS()" href="javascript:void(0)">Default</a>
                        <a class="dropdown-item" (click)="dcPrintLableOpen(opt)" href="javascript:void(0)"
                            *ngFor="let opt of allPrintLables">{{opt.mname}}</a>
                    </div>
                </div>
                <button type="button" (click)="dcConfirmShipmentTest()"
                    class="btn waves-effect waves-light btn-primary">Confirm
                    Shipment</button>
                <button type="button" class="btn btn-danger waves-effect" (click)="modalDispatchclosed()"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="ps-action-modal" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="color: rgb(255 165 0);font-weight: 400">{{selectedMenu}}</h2>

                <button type="button" class="close" data-dismiss="modal" (click)="modalActionclosed()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body" style="min-height: 70vh;max-height: 70vh;overflow-y: scroll;">
                <div *ngIf="selectedMenu==='Bulk email'">
                    <div class="col-md-12 col-lg-12 com-sm-12 card-body bg-info text-white">
                        <h6>Email the order invoice to the customer or shipping labels/order details to a
                            dropshipper/warehouse pickup agent</h6>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="form-group">
                            <label class="custom-control custom-checkbox m-b-0">
                                <input [checked]="bEmailInfo?.defaultsettings?.invoiceOnly" type="checkbox"
                                    class="custom-control-input" (click)="checKInvoiceForBulkEmail($event)">
                                <span class="custom-control-label">Send Invoice Only</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="custom-control custom-checkbox m-b-0">
                                <input [checked]="bEmailInfo?.defaultsettings?.attachLabel" type="checkbox"
                                    class="custom-control-input" (click)="checKLabelsForBulkEmail($event)">
                                <span class="custom-control-label">Include Shipping Labels</span>
                            </label>
                        </div>
                        <!-- <div class="form-group">
              <label class="custom-control custom-checkbox m-b-0">
                <input [checked]="bEmailInfo?.defaultsettings?.dontShowPrices" type="checkbox"
                  class="custom-control-input" (click)="checKPricesForBulkEmail($event)">
                <span class="custom-control-label">Exclude Prices</span>
              </label>
            </div>
            <div class="form-group">
              <label class="custom-control custom-checkbox m-b-0">
                <input [checked]="bEmailInfo?.defaultsettings?.includeOrderConfirmationCallbackUrl" type="checkbox"
                  class="custom-control-input" (click)="checKCallBackUrlForBulkEmail($event)">
                <span class="custom-control-label">Include Order Confirmation Callback Url(For Dropshippers only)</span>
              </label>
            </div> -->
                    </div>
                    <!-- <div class="col-md-12 col-lg-12 com-sm-12 m-t-10 text-right">
            <div class="col-md-12 col-lg-12">
              <p class=" text-left">Upload attachments. Only following file types are suported : Images, Text files and
                PDF files</p>
            </div>
            <button type="button" class="btn btn-primary"><i class="fas fa-upload"></i>Upload Attchments</button>
          </div> -->
                    <!-- <div class=" m-t-10">
            <h4> Previously sent emails</h4>
          </div>
          <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
            <div class="table-responsive">
              <table class="table table color-bordered-table success-bordered-table">
                <thead>
                  <th>
                    Sent Date
                  </th>
                  <th>
                    From Email
                  </th>
                  <th>
                    To Email
                  </th>
                  <th>
                    Attachments
                  </th>
                </thead>
                <tbody class="text-left">

                </tbody>
              </table>
            </div>
          </div> -->
                </div>
                <div *ngIf="selectedMenu==='Ship orders'" id="{{selectedMenu}}">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <!-- <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <app-app-date-picker lable="Fulfilment Date" (selectedDate)="selectedDispatchDate($event)">
                                    </app-app-date-picker>
                                </div>
                            </div> -->
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <!-- <div class="form-group">
                  <label class="control-label">Shipping Carrier Details</label>
                  <ng-multiselect-dropdown [settings]="dropdownSettings_scd" [placeholder]="'Select Carrier'"
                    id="shippingcarrier" name="shippingcarrier" [data]="exportCarriers" ngDefaultControl
                    [(ngModel)]="selectedCarrier_v2" (onSelect)="onShippingCarrierChange($event)">
                  </ng-multiselect-dropdown>
                </div> -->
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <!--
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Shipping Method</label>
                                    <input type="text" id="shippingmethod" class="form-control" placeholder="" [(ngModel)]="selectedShippingMethod" (input)="onShippingMethodChange($event)">
                                </div>
                            </div> -->
                            <!-- <div class="col-md-6 col-lg-6 com-sm-12">
                <div class="form-group">
                  <label class="control-label">Export Shipping Details</label>
                  <ng-multiselect-dropdown [settings]="dropdownSettings_scd" [placeholder]="'Select Carrier'"
                    id="selectedShipping" name="selectedShipping" [data]="exportCouriers" ngDefaultControl
                    [(ngModel)]="selectedShipping" (onSelect)="onExportShippingChange($event)">
                  </ng-multiselect-dropdown>
                </div>
              </div> -->

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-lg-4">
                            <div class="form-group">
                                <label class="control-label">Carrier</label>
                                <select (change)="mapData1()" [(ngModel)]="selectCarrier"
                                    class="form-control custom-select">
                                    <option disabled value="">--Select Carrier --</option>
                                    <option value="{{carrier.name }}" *ngFor="let carrier of exportCarrier">
                                        {{carrier.name }}</option>
                                </select>
                            </div>
                        </div>
                        <!-- <div class="col-md-4 col-lg-4">
                            <div class="form-group">
                                <label class="control-label">Shipping Method</label>
                                <select (change)="mapData1()" [(ngModel)]="shippingmethod"
                                    class="form-control custom-select">
                                    <option disabled value="">--Select shipping method --</option>
                                    <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">{{mthd.code }}<span
                                            *ngIf="carrierCode == 'dpd'">{{' '+mthd.name }}</span></option>
                                </select>
                                <select id="shippingmethod" (change)="mapData1()" [(ngModel)]="shippingmethod"
                                    class="form-control custom-select" *ngIf="carrierName == 'RM Click & Drop'">
                                    <option value="0">Please Select</option>

                                    <option value="BPL1">ROAYL MAIL 1st CLASS</option>
                                    <option value="BPL2">ROYAL MAIL 2nd CLASS</option>
                                    <option value="CRL24">ROYAL MAIL 24</option>
                                    <option value="CRL48">ROYAL MAIL 48</option>
                                    <option value="TRS48">ROYAL MAIL TRACKED 48 </option>
                                    <option value="TRN24">ROYAL MAIL TRACKED 24</option>
                                    <option value="TPN24">TRACKED 24 </option>
                                    <option value="TPN48">TRACKED 48 </option>


                                    <option value="OLP1SF">OLP1SF-Royal Mail Signed For 1st Class</option>
                                    <option value="OLP2">OLP2-Royal Mail 2nd Class</option>
                                    <option value="OLP1">OLP1-Royal Mail 1st Class</option>
                                    <option value="OLP2SF">OLP2SF-Royal Mail Signed For 2nd Class</option>
                                    <option value="SD1OLP">SD1OLP-Royal Mail Special Delivery Guaranteed by 1pm - £500
                                        Compensation</option>
                                    <option value="SD2OLP">SD2OLP-Royal Mail Special Delivery Guaranteed by 1pm - £1000
                                        Compensation
                                    </option>
                                    <option value="SD3OLP">SD3OLP-Royal Mail Special Delivery Guaranteed by 1pm - £2500
                                        Compensation
                                    </option>
                                    <option value="TOLP24">TOLP24-TOLP24</option>
                                    <option value="TOLP24SF">TOLP24SF-TOLP24SF</option>
                                    <option value="TOLP48">TOLP48-TOLP48</option>
                                    <option value="TOLP48SF">TOLP48SF-TOLP48SF</option>
                                    <option value="IEOLP">IEOLP-International Economy</option>
                                    <option value="ISOLP">ISOLP-International Standard</option>
                                    <option value="ISIOLP">ISIOLP-International Signed - £250 Compensation</option>
                                    <option value="ITROLP">ITROLP-International Tracked - £250 Compensation</option>
                                    <option value="ITSOLP">ITSOLP-International Tracked &amp; Signed - £250 Compensation
                                    </option>
                                </select>

                                <select id="shippingmethod" (change)="mapData1()" [(ngModel)]="shippingmethod"
                                    class="form-control custom-select" *ngIf="carrierName == 'Amazon Shipping'">
                                    <option value=" ">Please Select</option>
                                    <option value="Amazon Shipping One Day">Amazon Shipping One Day</option>
                                </select>
                            </div>
                        </div> -->
                        <div class="col-md-4 col-lg-4">
                            <div class="form-group">
                                <label class="control-label">Tracking Id</label>
                                <input (keypress)="keyPressAlphanumeric($event)" (blur)="mapData1()" [(ngModel)]="track"
                                    type="text" id="firstName" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="table-responsive">
                            <table class="table table color-bordered-table success-bordered-table">
                                <thead>
                                    <th>
                                        Buyer Item
                                    </th>
                                    <th>
                                        SKU
                                    </th>
                                    <th>
                                        Order Id
                                    </th>
                                    <th>
                                        Tracking Id
                                    </th>
                                    <th>
                                        Carrier
                                    </th>
                                    <th>
                                        Shipping Method
                                    </th>
                                    <!-- <th>
                                        Serial Number
                                    </th> -->
                                    <th>
                                        Dispatch Date
                                    </th>

                                </thead>
                                <tbody class="text-left">
                                    <ng-container *ngFor="let ordC of shipOrderItems">
                                        <tr *ngFor="let orders of ordC?.currentSale">
                                            <td>{{orders.title}}</td>
                                            <td>{{orders.sku}}</td>
                                            <td>{{orders.orderId}}</td>
                                            <td>
                                                <input type="text" class="form-control"
                                                    [(ngModel)]="orders.trackingNumber" />

                                            </td>
                                            <td>
                                                <input type="text" class="form-control"
                                                    [(ngModel)]="orders.carrierName" />

                                            </td>
                                            <td>
                                                <input type="text" class="form-control"
                                                    [(ngModel)]="orders.shippingMethod" />

                                            </td>
                                            <!-- <td><input type="text" class="form-control"
                                                    [value]="orders.trackingNumber" /></td> -->
                                            <!-- <td><input type="text"  class="form-control"
                                                    [value]="orders.carrierName" /></td>
                                            <td><input type="text"  class="form-control"
                                                    [value]="orders.shippingMethod" /></td> -->
                                            <!-- <td><input type="text" class="form-control" appDecimaNumberDirective
                                                    [(ngModel)]="orders.serialNumber" />
                                            </td> -->
                                            <td>
                                                {{orders.deliveryStartDate | date:'dd/MM/yyyy'}}
                                                <!-- <input type="text" disabled class="form-control" [value]="orders.deliveryStartDate" /> -->
                                            </td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedMenu==='Cancel orders'">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-3 col-lg-3 com-sm-12">

                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Cancel Reason</label>
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_cancelledReason"
                                        [placeholder]="'Select Reason'" id="cancelledReason" name="cancelledReason"
                                        [data]="cancelledReasons" ngDefaultControl [(ngModel)]="selectedCancelledReason"
                                        (onSelect)="onCancelReasonSelect($event)">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <!-- <div class="col-md-6 col-lg-6 com-sm-12">
                <button (click)="applySeachDate()" type="button" class="m-t-30 btn btn-primary"><i
                    class="fas fa-check"></i> Apply</button>
              </div> -->
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="form-group">
                            <label class="custom-control custom-checkbox m-b-0">
                                <input type="checkbox" class="custom-control-input">
                                <span class="custom-control-label">Add Stock Back</span>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="table-responsive">
                            <table class="table table color-bordered-table success-bordered-table">
                                <thead>
                                    <!-- <th>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" id="checkallCancel"  name="checkallCancel"
                        class="custom-control-input checkallP">
                      <label (click)="selectallOrderCancel($event)" class="custom-control-label"
                        for="checkallCancel"></label>
                    </div>
                  </th> -->
                                    <th>
                                        Buyer Item
                                    </th>
                                    <th>
                                        Order Id
                                    </th>
                                    <th>
                                        Cancel Reason
                                    </th>
                                </thead>
                                <tbody class="text-left">
                                    <ng-container *ngFor="let ordC of allItemForCancel">
                                        <tr *ngFor="let ord of ordC.currentSale">
                                            <!-- <th>
                        <div class="custom-control custom-checkbox">
                          <input (click)="individualCancelSelection(ord)" [checked]="ord.selected" type="checkbox"
                            [id]="'cancel-'+ord.id" [value]="ord.selected" [name]="test"
                            class="custom-control-input checkallP">
                          <label class="custom-control-label" for="cancel-{{ord.id}}"></label>
                        </div>
                      </th> -->
                                            <td>{{ord?.title}}</td>
                                            <td>{{ord?.orderId}}</td>
                                            <td><input disabled type="text" class="form-control"
                                                    value="{{ord.cancelreason}}" /></td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedMenu==='Create a picklist'">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <select class="form-control custom-select" [(ngmodel)]="picklistFormatTYpe"
                                        name="wer">
                                        <option value="111">Location wise picklist</option>
                                        <option value="222">Default pick list</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <button (click)="createPickList()" type="button" class="btn btn-primary"><i
                                        class=" fas fa-file-excel"></i> Export
                                    CSV</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <select class="form-control custom-select" name="we1r">
                                        <option value="111">Location wise picklist</option>
                                        <option value="222">Default pick list</option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="col-md-6 col-lg-6 com-sm-12">
                <button type="button" class="btn btn-primary"><i class="fas fa-file-pdf"></i> Export PDF</button>
              </div> -->
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedMenu==='Create a packlist'">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <select class="form-control custom-select" [(ngModel)]="packlistType" name="wer2">
                                        <option value="111">Location wise picklist</option>
                                        <option value="222">Default pick list</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <button (click)="createPackList()" type="button" class="btn btn-primary"><i
                                        class=" fas fa-file-excel"></i> Export
                                    CSV</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <select class="form-control custom-select" name="wer3">
                                        <option value="111">Location wise picklist</option>
                                        <option value="222">Default pick list</option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="col-md-6 col-lg-6 com-sm-12">
                <button type="button" class="btn btn-primary"><i class="fas fa-file-pdf"></i> Export PDF</button>
              </div> -->
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedMenu==='Export orders to csv'">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <select class="form-control custom-select" [(ngModel)]="exportOrderType">
                                        <option value="kartzhubformat">Default Orders Export</option>
                                        <option value="royalmailclickanddrop">Royal Mail Click &amp; Drop</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <button (click)="exportOrdersToExcell()" type="button" class="btn btn-primary"><i
                                        class=" fas fa-file-excel"></i> Export
                                    CSV</button>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
            <div class="col-md-12 col-lg-12 com-sm-12 row">
              <div class="col-md-6 col-lg-6 com-sm-12">
                <div class="form-group">
                  <select class="form-control custom-select">
                    <option value="">Location wise picklist</option>
                    <option value="">Default pick list</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 com-sm-12">
                <button type="button" class="btn btn-primary"><i class="fas fa-file-pdf"></i> Export PDF</button>
              </div>
            </div>
          </div> -->
                </div>
                <div *ngIf="selectedMenu==='Fulfilment'">
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="col-md-12 col-lg-12 com-sm-12 row">
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Fulfillment Network</label>
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_scd"
                                        [placeholder]="'Select Carrier'" id="shippingcarrier" name="shippingcarrier"
                                        [data]="exportCarriers" ngDefaultControl [(ngModel)]="selectedCarrier_v2">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Fulfillment Action</label>
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_scd"
                                        [placeholder]="'Select Carrier'" id="shippingcarrier" name="shippingcarrier"
                                        [data]="exportCarriers" ngDefaultControl [(ngModel)]="selectedCarrier_v2">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-6 com-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Apply Shipping Method</label>
                                    <ng-multiselect-dropdown [settings]="dropdownSettings_scd"
                                        [placeholder]="'Select Carrier'" id="shippingcarrier" name="shippingcarrier"
                                        [data]="exportCarriers" ngDefaultControl [(ngModel)]="selectedCarrier_v2">
                                    </ng-multiselect-dropdown>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12 com-sm-12 m-t-10">
                        <div class="table-responsive">
                            <table class="table table color-bordered-table success-bordered-table">
                                <thead>
                                    <th>

                                    </th>
                                    <th>
                                        Buyer Item
                                    </th>
                                    <th>
                                        SKU
                                    </th>
                                    <th>
                                        Order Id
                                    </th>
                                    <th>
                                        Fulfilment SKU
                                    </th>
                                    <th>
                                        Tracking Id
                                    </th>
                                    <th>
                                        Fulfilment Action
                                    </th>
                                    <th>
                                        Shipping Method
                                    </th>
                                    <th>
                                        Dispatch Date
                                    </th>
                                    <th>
                                        Action
                                    </th>
                                </thead>
                                <tbody class="text-left">

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div *ngIf="selectedMenu==='Notes'">
                    <div class="col-lg-12 col-md-12 row option-alignment" *ngIf="!isAddComment">
                        <div class="col-lg-12 col-sm-12 col-md-12  align-self-center text-right "
                            style="padding-right: 0px;">
                            <div class="d-flex justify-content-end align-items-center">
                                <button (click)="enableaddcomment()" type="button"
                                    class="btn btn-warning d-lg-block m-l-15"><i class="fa fa-plus-circle"></i> Add
                                    comment</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12" *ngIf="!isAddComment">
                        <h4>Comments ({{notes.length}})</h4>
                        <div class="d-flex no-block comment-row" *ngFor="let comment of notes">
                            <div class="p-2"><span class="round">
                                    <!-- <img src="../assets/images/users/1.jpg" alt="user" width="50"> -->
                                </span>
                            </div>
                            <div class="comment-text w-100">
                                <h5 class="font-medium">{{comment.commentBy}}</h5>
                                <p class="m-b-10 text-muted">{{comment.comment}}</p>
                                <div class="comment-footer">
                                    <!-- <span class="text-muted pull-right">{{comment.date | date:'dd MMM yyyy'}}</span>-->
                                    <span class="badge badge-pill badge-info">{{comment.date | date:'dd MMM
                                        yyyy'}}</span> <span class="action-icons">
                                        <!-- <a (click)="editNote(comment)"><i class="ti-pencil-alt"></i></a> -->
                                        <!-- <a href="javascript:void(0)"><i class="ti-close"></i></a> -->
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12" *ngIf="isAddComment">
                        <div class="form-group">
                            <label>Comment :</label>
                            <textarea [(ngModel)]="coomentText" class="form-control" rows="5"></textarea>
                        </div>
                        <div class="col-md-12 col-lg-12 text-right">
                            <button (click)="createNotes()" type="button" class="btn btn-warning d-lg-block m-l-15"><i
                                    class="fa fa-plus-circle"></i> Add comment</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div *ngIf="selectedMenu==='Bulk email'">
                    <button type="button" (click)="bulkemail()" class="btn waves-effect waves-light btn-success">Email
                        order
                        details</button>
                    <button type="button" class="btn btn-danger waves-effect m-l-10" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Ship orders'">
                    <button type="button" class="btn waves-effect waves-light btn-success"
                        (click)="confirmShipment()">Confirm
                        shipment</button>
                    <button type="button" class="btn btn-danger waves-effect m-l-10" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Cancel orders'">
                    <button type="button" class="btn waves-effect waves-light btn-success"
                        [disabled]="allItemForCancel.length == 0" (click)="cancelSelectedOrders()">Cancel selected
                        orders</button>
                    <button type="button" class="btn btn-danger waves-effect m-l-10" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Create a picklist'">
                    <!-- <button type="button" class="btn waves-effect waves-light btn-success">Cancel selected orders</button> -->
                    <button type="button" class="btn btn-danger waves-effect" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Create a packlist'">
                    <!-- <button type="button" class="btn waves-effect waves-light btn-success">Cancel selected orders</button> -->
                    <button type="button" class="btn btn-danger waves-effect" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Export orders to csv'">
                    <!-- <button type="button" class="btn waves-effect waves-light btn-success">Cancel selected orders</button> -->
                    <button type="button" class="btn btn-danger waves-effect" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Notes'">
                    <!-- <button type="button" class="btn waves-effect waves-light btn-success">Cancel selected orders</button> -->
                    <button type="button" class="btn btn-danger waves-effect" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
                <div *ngIf="selectedMenu==='Fulfilment'">
                    <button type="button" class="btn waves-effect waves-light btn-success m-l-10">Fulfillment
                        Order</button>
                    <button type="button" class="btn waves-effect waves-light btn-success m-l-10">Send To FBA</button>
                    <button type="button" class="btn btn-danger waves-effect m-l-10" (click)="modalActionclosed()"
                        data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="ps-print-labels" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 *ngIf="!isLabelsPrinted" class="modal-title" style="color: rgb(255 165 0);font-weight: 400">Print
                    Labels
                </h2>
                <h2 *ngIf="isLabelsPrinted && selectedCarrier_code != 'dropbox'" class="modal-title"
                    style="color: rgb(255 165 0);font-weight: 400">Following Labels are created</h2>
                <h2 *ngIf="isLabelsPrinted && selectedCarrier_code == 'dropbox'" class="modal-title"
                    style="color: rgb(255 165 0);font-weight: 400">Order Successfully Moved</h2>
                <button type="button" class="close" data-dismiss="modal" (click)="modalPrintLableClose()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body" style="min-height: 70vh;max-height: 70vh;overflow-y: scroll;">
                <div class="row" *ngIf="!isLabelsPrinted">
                    <!-- <div class="col-md-4 col-lg-4" >
            <app-app-date-picker lable="Shipping Dates" (selectedDate)="shippingDates($event)" [minDate]="currentDate"></app-app-date-picker>
          </div> -->
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">Shipping Service</label>
                            <select (change)="mapData()" [(ngModel)]="shippingservice"
                                class="form-control custom-select"
                                *ngIf="selectedCarrier != 'RM Click & Drop' && selectedCarrier!= 'Amazon Shipping'">
                                <option disabled value="">--Select shipping method --</option>
                                <option value="{{mthd.code}}" *ngFor="let mthd of shippingMethods">{{mthd.code }}<span
                                        *ngIf="selectedCarrier_code == 'dpd'">{{' '+mthd.name }}</span></option>
                            </select>
                            <select id="shippingmethod" (change)="mapData()" [(ngModel)]="shippingservice"
                                class="form-control custom-select" *ngIf="selectedCarrier == 'RM Click & Drop'">
                                <option value="0">Please Select</option>

                                <option value="BPL1">ROAYL MAIL 1st CLASS</option>
                                <option value="BPL2">ROYAL MAIL 2nd CLASS</option>
                                <option value="CRL24">ROYAL MAIL 24</option>
                                <option value="CRL48">ROYAL MAIL 48</option>
                                <option value="TRS48">ROYAL MAIL TRACKED 48 </option>
                                <option value="TRN24">ROYAL MAIL TRACKED 24</option>
                                <option value="TPN24">TRACKED 24 </option>
                                <option value="TPN48">TRACKED 48 </option>


                                <option value="OLP1SF">OLP1SF-Royal Mail Signed For 1st Class</option>
                                <option value="OLP2">OLP2-Royal Mail 2nd Class</option>
                                <option value="OLP1">OLP1-Royal Mail 1st Class</option>
                                <option value="OLP2SF">OLP2SF-Royal Mail Signed For 2nd Class</option>
                                <option value="SD1OLP">SD1OLP-Royal Mail Special Delivery Guaranteed by 1pm - £500
                                    Compensation</option>
                                <option value="SD2OLP">SD2OLP-Royal Mail Special Delivery Guaranteed by 1pm - £1000
                                    Compensation
                                </option>
                                <option value="SD3OLP">SD3OLP-Royal Mail Special Delivery Guaranteed by 1pm - £2500
                                    Compensation
                                </option>
                                <option value="TOLP24">TOLP24-TOLP24</option>
                                <option value="TOLP24SF">TOLP24SF-TOLP24SF</option>
                                <option value="TOLP48">TOLP48-TOLP48</option>
                                <option value="TOLP48SF">TOLP48SF-TOLP48SF</option>
                                <option value="IEOLP">IEOLP-International Economy</option>
                                <option value="ISOLP">ISOLP-International Standard</option>
                                <option value="ISIOLP">ISIOLP-International Signed - £250 Compensation</option>
                                <option value="ITROLP">ITROLP-International Tracked - £250 Compensation</option>
                                <option value="ITSOLP">ITSOLP-International Tracked &amp; Signed - £250 Compensation
                                </option>
                                <option value="MTO">MTO-International Signed</option>
                                <option value="MTK">MTK-International Tracked</option>
                                <option value="MTG">MTG-International Tracked &amp; Signed</option>
                                <option value="MP9">MP9-International Signed</option>
                                <option value="MP7">MP7-International Tracked</option>
                                <option value="MTE">MTE-International Tracked &amp; Signed</option>
                                <option value="TPN">TPN-ROYAL MAIL TRACKED 24
                                </option>
                                <option value="TPS">TPS-ROYAL MAIL TRACKED 48
                                </option>
                                <option value="TRL">TRL-ROYAL MAIL TRACKED 48 (LBT) (HV)
                                </option>
                                <option value="TRM">TRM-ROYAL MAIL TRACKED 24 (LBT) (HV)
                                </option>
                                <option value="TRN">TRN-ROYAL MAIL TRACKED 24 (LBT)
                                </option>
                                <option value="TRS">TRS-ROYAL MAIL TRACKED 48 (LBT)
                                </option>
                                <option value="CRL">CRL-ROYAL MAIL 24\48
                                </option>
                            </select>

                            <select id="shippingmethod" (change)="mapData()" [(ngModel)]="shippingservice"
                                class="form-control custom-select" *ngIf="selectedCarrier == 'Amazon Shipping'">
                                <option value=" ">Please Select</option>
                                <option value="Amazon Shipping One Day">Amazon Shipping One Day</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">Weight in (kgs)</label>
                            <input appDecimaNumberDirective (blur)="mapData()" [(ngModel)]="weight" type="text"
                                id="firstName" class="form-control">
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">Dimensions Length (cms)</label>
                            <input appDecimaNumberDirective (blur)="mapData()" [(ngModel)]="length" type="text"
                                id="firstName" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="!isLabelsPrinted">
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">Width (cms)</label>
                            <input appDecimaNumberDirective (blur)="mapData()" [(ngModel)]="width" type="text"
                                id="firstName" class="form-control">
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4">
                        <div class="form-group">
                            <label class="control-label">Height (cms)</label>
                            <input appDecimaNumberDirective (blur)="mapData()" [(ngModel)]="height" type="text"
                                id="firstName" class="form-control">
                        </div>
                    </div>

                    <div class="col-md-4 col-lg-4"
                        *ngIf="selectedCarrier_code == 'royalmail' || selectedCarrier_code =='dropbox'">
                        <div class="form-group">
                            <label class="control-label">Service formats</label>
                            <select (change)="mapData()" [(ngModel)]="serviceFormat"
                                *ngIf="selectedCarrier_code == 'royalmail'" class="form-control custom-select">
                                <option disabled value="0">--Select service format --</option>
                                <option value="L"> Letter (L)</option>
                                <option value="F"> Large Letter (F)</option>
                                <option value="P">Parcel (P)</option>
                                <option value="S">Printed Papers - International Services Only (S)</option>
                            </select>
                            <select *ngIf="selectedCarrier_code == 'dropbox'" [(ngModel)]="serviceFormat"
                                (change)="mapData()" class="form-control custom-select">
                                <option value="0">Please Select</option>
                                <option value="Letter">Letter</option>
                                <option value="Large Letter">Large Letter</option>
                                <option value="Small Parcel">Small Parcel</option>
                                <option value="Medium Parcel">Medium Parcel</option>
                            </select>

                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="!isLabelsPrinted">
                    <div class="table-responsive">
                        <table class="table table-bordered table-stripped">
                            <thead>
                                <tr>
                                    <th>
                                        <div class="form-group">
                                            <label class="custom-control custom-checkbox m-b-0">
                                                <input [checked]="isPrintLabelSelectAll"
                                                    (click)="changePrintLabelSelectAll()" type="checkbox"
                                                    class="custom-control-input">
                                                <span class="custom-control-label"></span>
                                            </label>
                                        </div>
                                    </th>
                                    <th style="min-width: 100px;">Buyer Item</th>
                                    <th>Order Id</th>
                                    <th>Carrier</th>
                                    <th>Shipping Method</th>
                                    <th>Tracking Id</th>
                                    <th>Item Weight</th>
                                    <th>Item Dimensions (L/W/H)</th>
                                    <th>Dispatch Date</th>
                                    <th>Label</th>
                                    <th>Service Format</th>
                                    <th>Errors</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let ordDetails of labeledOrders">
                                    <tr *ngFor="let csale of  ordDetails?.channelSales">
                                        <td>
                                            <div class="form-group">
                                                <label class="custom-control custom-checkbox m-b-0">
                                                    <input (click)="changePrintLabelSelectAllv2(ordDetails)"
                                                        [checked]="ordDetails.selected" type="checkbox"
                                                        class="custom-control-input">
                                                    <span class="custom-control-label"></span>
                                                </label>
                                            </div>
                                        </td>
                                        <td>{{csale.title}}</td>
                                        <td>{{ordDetails.orderId}}</td>
                                        <td>{{selectedCarrier}}</td>
                                        <td>{{csale.shippingMethod}}</td>
                                        <td>{{ordDetails.trackingNumber}}</td>
                                        <td>{{csale.weight}}</td>
                                        <td>{{csale.length}} <span *ngIf="csale.width">/</span>{{csale.width}}<span
                                                *ngIf="csale.height">/</span>{{csale.height}}</td>
                                        <td>{{csale.dispatchDate | date: 'dd/MM/yyyy'}}</td>
                                        <td><i *ngIf="csale?.labelPdfs?.length>0"
                                                (click)="openPdf(csale?.labelPdfs);updatePrintedStatus(csale)"
                                                style="cursor: pointer;color:#fec107"
                                                class=" fa-lg fas fa-file-pdf"></i></td>
                                        <td>{{serviceFormat}}</td>
                                        <td>{{csale.field1}}</td>
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="table-responsive" *ngIf="isLabelsPrinted">
                    <table class="table table-bordered table-stripped">
                        <thead>
                            <tr>
                                <th>Order Id</th>
                                <th>Label Created</th>
                                <th>Label Printed</th>
                                <!-- <th>Label Printed Time</th> -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let ordDetails of labelsPrintd">
                                <td>{{ordDetails.orderId}}</td>
                                <td><i *ngIf="ordDetails?.orderDetails?.labelPdfs?.length>0"
                                        (click)="openPdf(ordDetails?.orderDetails?.labelPdfs);updatePrintedStatus(ordDetails)"
                                        style="cursor: pointer;color:#fec107" class=" fa-lg fas fa-file-pdf"></i></td>
                                <td>{{ordDetails?.labelPrinted==false?'No':'Yes'}}</td>
                                <!-- <td>{{ordDetails?.labelPrintedDate | date:'dd MMM yyyy'}}</td> -->
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" (click)="printGenLaels()" class="btn waves-effect waves-light btn-success">Print
                    Label</button>
                <button type="button" (click)="confirmShipmentV2()" class="btn waves-effect waves-light btn-primary"
                    *ngIf="showConfirmShipmentButton">Confirm
                    Shipment</button>
                <button type="button" class="btn btn-danger waves-effect"
                    (click)="modalDispatchclosed();modalActionclosed();" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div id="ps-print-invoices" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="color: rgb(255 165 0);font-weight: 400">Print Invoices</h2>
                <button type="button" class="close" data-dismiss="modal" (click)="modalPrintLableClose()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body" style="min-height: 70vh;max-height: 70vh;overflow-y: scroll;">
                <div class="row" *ngIf="!isPreviewEnabled">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th style="max-width: 120px;">Order Id</th>
                                <th class="text-center">Preview</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let order_print of printInvoiceData">
                                <td>{{order_print?.order?.orderId}}</td>
                                <td class="text-center">
                                    <button type="button" class="btn btn-warning " (click)="preview(order_print)"><i
                                            class=" fas fa-eye"></i> Preview</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row" *ngIf="isPreviewEnabled">
                    <!-- <div class="card card-body printableArea" id="printOnly" *ngIf="selectedOrderData">
            <div [innerHTML]="selectedOrderData.invoiceAddressText | safeHTML"></div>
            <div [innerHTML]="selectedOrderData.invoiceHeaderText | safeHTML"></div>
            <div>
              <table class="table table-bordered table-striped" style="margin-bottom: 1rem;border: 1px solid #030303;text-indent: initial;
              border-spacing: 2px;">
                <thead>
                  <tr>
                    <th style="max-width: 120px;">Product</th>
                    <th class="text-center">SKU</th>
                    <th class="text-center">Title</th>
                    <th class="text-center">Qty</th>
                    <th class="text-center">Item Price</th>
                    <th class="text-center">Item Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let order_print of selectedOrderData.channelSales">
                    <td><img style="height: 50px;width: 100px;" src="{{order_print?.imageUrl}}"
                        class="p-img img-responsive" /></td>
                    <td>{{order_print?.sku}}</td>
                    <td>{{order_print?.title}}</td>
                    <td>{{order_print?.quantityPurchased}}</td>
                    <td>{{order_print?.itemPrice}}</td>
                    <td>{{order_print?.totalPrice}}</td>
                  </tr>
                  <tr style="border:1px solid #030303;">
                    <td colspan="6" class="text-right" style="text-align: right;">
                      <label>Postage & Package :{{selectedOrderData?.shippingPrice}}</label><br>
                      <label>VAT :{{selectedOrderData?.vat}}</label><br>
                      <label>Total :{{selectedOrderData?.total}}</label>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div [innerHTML]="selectedOrderData.invoiceFooterText | safeHTML"></div>
          </div> -->
                    <app-print-orders [printTemplate]="selectedOrderData"></app-print-orders>
                </div>
                <div>

                </div>
            </div>
            <div class="modal-footer">
                <button *ngIf="isPreviewEnabled" (click)="print()" type="button" class="btn btn-success waves-effect"><i
                        class=" fas fa-print"></i> Print</button>
                <button *ngIf="isPreviewEnabled" (click)="backToList()" type="button"
                    class="btn btn-danger waves-effect">close</button>
                <button *ngIf="!isPreviewEnabled" (click)="modalActionclosed()" type="button"
                    class="btn btn-danger waves-effect" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="ps-split-order" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" style="color: rgb(255 165 0);font-weight: 400">Split Order</h2>
                <button type="button" class="close" data-dismiss="modal" (click)="modalSplitClose()"
                    aria-hidden="true">×</button>
            </div>
            <div class="modal-body" style="max-height: 70vh;overflow-y: scroll; padding-right: 0%;">
                <div class="col-md-12 col-lg-12 row p-0">
                    <div class="col-md-3 col-lg-3">
                        <h4>Order Details</h4>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shippingAddress1}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shippingAddress2}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shippingAddress3}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shipCity}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shipState}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shipCountry}}</p>
                        <p *ngIf="splitAddressItems.length>0">{{splitAddressItems[0].shipPostalCode}}</p>
                    </div>
                    <div class="col-md-9 col-lg-9 p-0">
                        <div class="table-responsive">
                            <table class="table color-bordered-table info-bordered-table">
                                <thead>
                                    <tr>
                                        <th>S</th>
                                        <th>SKU</th>
                                        <th>Title</th>
                                        <th>Quantity</th>
                                        <!-- <th>Move</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let orderItem of splitOrderItems">
                                        <td>
                                            <div class="custom-control custom-checkbox">
                                                <input (click)="splitIndividualSelection(orderItem)"
                                                    [checked]="orderItem.selected" type="checkbox"
                                                    [id]="orderItem.sku+orderItem.id" [value]="orderItem.selected"
                                                    [name]="test" class="custom-control-input checkallSplit">
                                                <label class="custom-control-label"
                                                    for="{{orderItem.sku}}{{orderItem.id}}"></label>
                                            </div>
                                        </td>
                                        <td>{{orderItem.sku}}</td>
                                        <td>{{orderItem.title}}</td>
                                        <td>{{orderItem.quantityPurchased}}</td>
                                        <!-- <td>{{orderItem.quantityPurchased}}</td> -->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-sm-12 col-md-12  align-self-center text-right " style="padding-right: 0px;">
                    <div class="d-flex justify-content-end align-items-center">
                        <!-- <button type="button" class="btn btn-info d-lg-block m-l-5"><i class=" fas fa-file-excel"></i> Auto
              Split</button> -->
                        <button (click)="individualSplit()" type="button" class="btn btn-info d-lg-block m-l-5"><i
                                class=" fas fa-print"></i>Manual Split</button>
                        <button (click)="oneinSplit()" type="button" class="btn btn-info d-lg-block m-l-5"><i
                                class=" fas fa-print"></i> One in each
                            split</button>
                        <button (click)="clearSplitItems()" type="button"
                            class="btn btn-danger d-lg-block m-l-5 m-r-5"><i class=" fas fa-print"></i> Clear
                            All</button>
                    </div>
                </div>
                <div class="row m-r-0 m-l-0 m-t-10">
                    <div class="col-md-6 col-lg-6" *ngFor="let it of splitViewItems">
                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table color-bordered-table info-bordered-table">
                                        <thead>
                                            <tr>
                                                <th>SKU</th>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let orderItem of it">
                                                <td>{{orderItem.sku}}</td>
                                                <td>{{orderItem.quantityPurchased}}</td>
                                                <td>{{orderItem.totalPrice}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button (click)="openSplitSwal()" type="button" class="btn waves-effect waves-light btn-success">Split
                    Orders</button>
                <button type="button" class="btn btn-danger waves-effect" (click)="modalSplitClose()"
                    data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>