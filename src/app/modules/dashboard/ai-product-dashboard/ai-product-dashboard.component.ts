import { Component, OnInit, SecurityContext } from '@angular/core';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';
import { TrackMenus } from 'src/app/_models/menuForTrack';
import { pages } from 'src/app/_models/pages';
import { subMenus } from 'src/app/_models/subMenuTrack';
import { usertrackInput } from 'src/app/_models/usertrackInput';
import { AppTrackingService } from 'src/app/_service/app-tracking.service';

@Component({
  selector: 'app-ai-product-dashboard',
  templateUrl: './ai-product-dashboard.component.html',
  styleUrls: ['./ai-product-dashboard.component.scss']
})

export class AiProductDashboardComponent implements OnInit {
  loaded: boolean = false;
  urlSafe: SafeResourceUrl;
  url: string = "https://login.sellershub.io/aidashboard/app/dashboards#/view/ba169d90-9433-11ec-b15b-83c1e2f2c818?embed=true&_a=(description:'',filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,field:qty,index:'7daabd60-9432-11ec-b15b-83c1e2f2c818',key:qty,negate:!f,params:(gte:1,lt:10000000),type:range),query:(range:(qty:(gte:1,lt:10000000)))),('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'7903f070-8090-11ec-82dd-951823ba93c1',key:khub_user_id,negate:!f,params:(query:2358),type:phrase),query:(match_phrase:(khub_user_id:2358)))),fullScreenMode:!f,options:(hidePanelTitles:!f,syncColors:!f,useMargins:!t),panels:!((embeddableConfig:(enhancements:(),hidePanelTitles:!t,savedVis:(data:(aggs:!(),searchSource:(filter:!(),query:(language:kuery,query:''))),description:'',id:'',params:(fontSize:12,markdown:'%23%23%23%20%5B!!%5BSellershub.io%5D(https:%2F%2Fwww.sellershub.io%2Fwp-content%2Fuploads%2F2021%2F11%2Fsel-up-1.png)%5D(https:%2F%2Fwww.sellershub.io%2F)%0A%0A',openLinksInNewTab:!f),title:'',type:markdown,uiState:())),gridData:(h:6,i:'5f2df8bb-213e-4d12-9eba-24f59a720474',w:9,x:0,y:0),panelIndex:'5f2df8bb-213e-4d12-9eba-24f59a720474',type:visualization,version:'7.16.2'),(embeddableConfig:(enhancements:(),hidePanelTitles:!t,savedVis:(data:(aggs:!(),searchSource:(filter:!(),query:(language:kuery,query:''))),description:'',id:'',params:(fontSize:12,markdown:'%23%23%23%20Products%20Realtime%20Stats%0AThis%20dashboard%20contains%20Products%20Realtime%20Stats.%20You%20can%20view%20it,%20search%20it,%20and%20interact%20with%20the%20visualizations.%20For%20more%20information%20about%20Sellershub%20documentation,%20check%20our%20%5Bdocs%5D(https:%2F%2Fwww.sellershub.io%2Fknowledge-base%2Fuser-guide%2F).%20%20%20%20%20%20%20%0A',openLinksInNewTab:!f),title:'',type:markdown,uiState:())),gridData:(h:6,i:a0b58117-9a41-4416-8623-1896a1e6c934,w:39,x:9,y:0),panelIndex:a0b58117-9a41-4416-8623-1896a1e6c934,type:visualization,version:'7.16.2'),(embeddableConfig:(enhancements:(),hidePanelTitles:!f,savedVis:(data:(aggs:!(),searchSource:(filter:!(),query:(language:kuery,query:''))),description:'',id:'',params:(controls:!((fieldName:channel.keyword,id:'1648846079345',indexPattern:'7daabd60-9432-11ec-b15b-83c1e2f2c818',label:Channels,options:(dynamicOptions:!t,multiselect:!t,order:desc,size:5,type:terms),parent:'',type:list),(fieldName:manufacture.keyword,id:'1648846004163',indexPattern:'7daabd60-9432-11ec-b15b-83c1e2f2c818',label:'Manufacture%20Name',options:(dynamicOptions:!t,multiselect:!t,order:desc,size:50,type:terms),parent:'',type:list),(fieldName:sku.keyword,id:'1648846624892',indexPattern:'7daabd60-9432-11ec-b15b-83c1e2f2c818',label:SKU,options:(dynamicOptions:!t,multiselect:!t,order:desc,size:5,type:terms),parent:'',type:list)),pinFilters:!f,updateFiltersOnChange:!f,useTimeFilter:!f),title:'',type:input_control_vis,uiState:())),gridData:(h:7,i:e4f8531a-1442-4569-836c-6e4be9231887,w:48,x:0,y:6),panelIndex:e4f8531a-1442-4569-836c-6e4be9231887,title:'Product%20Filters',type:visualization,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-921ab07a-68c5-4043-8120-929a5b113ec1,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('921ab07a-68c5-4043-8120-929a5b113ec1':(columnOrder:!('146b40fb-7727-4fda-be9a-aaa0f5912da5','9cf3302a-4374-44c5-88e9-546941579196',f2c0bc14-872a-4c50-bed1-cdb4a7471c53),columns:('146b40fb-7727-4fda-be9a-aaa0f5912da5':(dataType:string,isBucketed:!t,label:'Top%20values%20of%20channel.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:f2c0bc14-872a-4c50-bed1-cdb4a7471c53,type:column),orderDirection:desc,otherBucket:!t,size:3),scale:ordinal,sourceField:channel.keyword),'9cf3302a-4374-44c5-88e9-546941579196':(dataType:date,isBucketed:!t,label:'@timestamp',operationType:date_histogram,params:(interval:auto),scale:interval,sourceField:'@timestamp'),f2c0bc14-872a-4c50-bed1-cdb4a7471c53:(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(axisTitlesVisibilitySettings:(x:!t,yLeft:!t,yRight:!t),fittingFunction:None,gridlinesVisibilitySettings:(x:!t,yLeft:!t,yRight:!t),labelsOrientation:(x:0,yLeft:0,yRight:0),layers:!((accessors:!(f2c0bc14-872a-4c50-bed1-cdb4a7471c53),layerId:'921ab07a-68c5-4043-8120-929a5b113ec1',layerType:data,position:top,seriesType:bar,showGridlines:!f,splitAccessor:'146b40fb-7727-4fda-be9a-aaa0f5912da5',xAccessor:'9cf3302a-4374-44c5-88e9-546941579196')),legend:(isVisible:!t,position:right),preferredSeriesType:bar,tickLabelsVisibilitySettings:(x:!t,yLeft:!t,yRight:!t),valueLabels:hide,yLeftExtent:(mode:full),yRightExtent:(mode:full))),title:'',type:lens,visualizationType:lnsXY),enhancements:(),hidePanelTitles:!f),gridData:(h:10,i:'324c3792-f98e-4cbd-8d1e-0e7579571f95',w:48,x:0,y:13),panelIndex:'324c3792-f98e-4cbd-8d1e-0e7579571f95',title:'Product%20Stats',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-05b14248-e79b-4f05-80f5-179652976374,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('05b14248-e79b-4f05-80f5-179652976374':(columnOrder:!('02d761b6-09e3-4eab-ad0d-0d6a286253d7'),columns:('02d761b6-09e3-4eab-ad0d-0d6a286253d7':(customLabel:!t,dataType:number,isBucketed:!f,label:'%20',operationType:unique_count,scale:ratio,sourceField:id)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(accessor:'02d761b6-09e3-4eab-ad0d-0d6a286253d7',layerId:'05b14248-e79b-4f05-80f5-179652976374',layerType:data)),title:'',type:lens,visualizationType:lnsMetric),enhancements:(),hidePanelTitles:!f),gridData:(h:6,i:'18479fdc-c077-499f-ae51-904047b58d3d',w:14,x:0,y:23),panelIndex:'18479fdc-c077-499f-ae51-904047b58d3d',title:'Unique%20products',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-89d3873e-2e0c-487c-b5b8-44dea6ba3fa7,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('89d3873e-2e0c-487c-b5b8-44dea6ba3fa7':(columnOrder:!(df5057d9-d036-4612-96ba-1b5337f5e476),columns:(df5057d9-d036-4612-96ba-1b5337f5e476:(customLabel:!t,dataType:number,isBucketed:!f,label:'%20',operationType:sum,scale:ratio,sourceField:qty)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(accessor:df5057d9-d036-4612-96ba-1b5337f5e476,layerId:'89d3873e-2e0c-487c-b5b8-44dea6ba3fa7',layerType:data)),title:'',type:lens,visualizationType:lnsMetric),enhancements:(),hidePanelTitles:!f),gridData:(h:6,i:'72164082-e91f-4f1e-a687-adb344557dc3',w:11,x:14,y:23),panelIndex:'72164082-e91f-4f1e-a687-adb344557dc3',title:'Total%20Quantity',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-5c4b580f-b917-46c5-99f1-1baa0f94df77,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('5c4b580f-b917-46c5-99f1-1baa0f94df77':(columnOrder:!('4b2ba35f-5372-4e4f-981b-e3421220c85b'),columns:('4b2ba35f-5372-4e4f-981b-e3421220c85b':(customLabel:!t,dataType:number,isBucketed:!f,label:'%20',operationType:sum,scale:ratio,sourceField:listingqty)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(accessor:'4b2ba35f-5372-4e4f-981b-e3421220c85b',layerId:'5c4b580f-b917-46c5-99f1-1baa0f94df77',layerType:data)),title:'',type:lens,visualizationType:lnsMetric),enhancements:(),hidePanelTitles:!f),gridData:(h:6,i:'12c0605a-fd49-4607-bf28-5b144a070b23',w:11,x:25,y:23),panelIndex:'12c0605a-fd49-4607-bf28-5b144a070b23',title:'Sum%20of%20Listing%20Quantity',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-482a1526-8b3d-4e77-bcce-81f03329572a,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('482a1526-8b3d-4e77-bcce-81f03329572a':(columnOrder:!('14988b3e-2b89-447f-8571-ca86ff181ddc','14988b3e-2b89-447f-8571-ca86ff181ddcX0'),columns:('14988b3e-2b89-447f-8571-ca86ff181ddc':(customLabel:!t,dataType:number,isBucketed:!f,label:'%20',operationType:formula,params:(format:(id:number,params:(decimals:0)),formula:'sum(selling_price)',isFormulaBroken:!f),references:!('14988b3e-2b89-447f-8571-ca86ff181ddcX0'),scale:ratio),'14988b3e-2b89-447f-8571-ca86ff181ddcX0':(customLabel:!t,dataType:number,isBucketed:!f,label:'Part%20of%20sum%20of%20selling%20price',operationType:sum,scale:ratio,sourceField:selling_price)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(accessor:'14988b3e-2b89-447f-8571-ca86ff181ddc',layerId:'482a1526-8b3d-4e77-bcce-81f03329572a',layerType:data)),title:'',type:lens,visualizationType:lnsMetric),enhancements:(),hidePanelTitles:!f),gridData:(h:6,i:'07cc3275-02d7-41ee-bf70-b408ed09d561',w:12,x:36,y:23),panelIndex:'07cc3275-02d7-41ee-bf70-b408ed09d561',title:'sum%20of%20Selling%20Price',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-e9993d44-0bd9-4aac-a7a9-eb6cc9a93f05,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:(e9993d44-0bd9-4aac-a7a9-eb6cc9a93f05:(columnOrder:!('58715d20-1fb3-4e2e-8c2d-b98ce1ee1686','78628964-3b0a-4942-9b13-5f246b8d54ae'),columns:('58715d20-1fb3-4e2e-8c2d-b98ce1ee1686':(dataType:string,isBucketed:!t,label:'Top%20values%20of%20channel.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:'78628964-3b0a-4942-9b13-5f246b8d54ae',type:column),orderDirection:desc,otherBucket:!t,size:5),scale:ordinal,sourceField:channel.keyword),'78628964-3b0a-4942-9b13-5f246b8d54ae':(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!('58715d20-1fb3-4e2e-8c2d-b98ce1ee1686'),layerId:e9993d44-0bd9-4aac-a7a9-eb6cc9a93f05,layerType:data,legendDisplay:default,metric:'78628964-3b0a-4942-9b13-5f246b8d54ae',nestedLegend:!f,numberDisplay:percent)),shape:donut)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:14,i:f0a87bb4-da41-450f-9129-bfde859e8895,w:14,x:0,y:29),panelIndex:f0a87bb4-da41-450f-9129-bfde859e8895,title:Channel,type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-e283574e-925b-4f93-8dfa-83dec7fc2994,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:(e283574e-925b-4f93-8dfa-83dec7fc2994:(columnOrder:!('5acbc0de-648f-461d-83c8-77b15fe5fb0d',a5b46dc1-7849-4c79-8e85-5c625f134ce7),columns:('5acbc0de-648f-461d-83c8-77b15fe5fb0d':(dataType:string,isBucketed:!t,label:'Top%20values%20of%20manufacture.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:a5b46dc1-7849-4c79-8e85-5c625f134ce7,type:column),orderDirection:desc,otherBucket:!t,size:20),scale:ordinal,sourceField:manufacture.keyword),a5b46dc1-7849-4c79-8e85-5c625f134ce7:(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!('5acbc0de-648f-461d-83c8-77b15fe5fb0d'),layerId:e283574e-925b-4f93-8dfa-83dec7fc2994,layerType:data,legendDisplay:default,metric:a5b46dc1-7849-4c79-8e85-5c625f134ce7,nestedLegend:!f,numberDisplay:percent)),shape:donut)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:14,i:'38a598eb-ca39-4a90-a7fc-fe0959d2323c',w:16,x:14,y:29),panelIndex:'38a598eb-ca39-4a90-a7fc-fe0959d2323c',title:Manufacture,type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-569e9882-c282-4260-b4eb-f9c40f5515ef,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('569e9882-c282-4260-b4eb-f9c40f5515ef':(columnOrder:!(f00205de-29a4-4308-b670-0d8553edeb35,'556fb6a6-d2fc-4526-80c9-fd502507d07b'),columns:('556fb6a6-d2fc-4526-80c9-fd502507d07b':(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records),f00205de-29a4-4308-b670-0d8553edeb35:(dataType:string,isBucketed:!t,label:'Top%20values%20of%20brand.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:'556fb6a6-d2fc-4526-80c9-fd502507d07b',type:column),orderDirection:desc,otherBucket:!t,size:25),scale:ordinal,sourceField:brand.keyword)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!(f00205de-29a4-4308-b670-0d8553edeb35),layerId:'569e9882-c282-4260-b4eb-f9c40f5515ef',layerType:data,legendDisplay:default,metric:'556fb6a6-d2fc-4526-80c9-fd502507d07b',nestedLegend:!f,numberDisplay:percent)),shape:donut)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:14,i:'601ff9b2-67b1-4783-80a7-c9d9aeb1b7d0',w:18,x:30,y:29),panelIndex:'601ff9b2-67b1-4783-80a7-c9d9aeb1b7d0',title:Brands,type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-b97b8442-8927-42df-92c9-581e36093cc0,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:(b97b8442-8927-42df-92c9-581e36093cc0:(columnOrder:!('5938181c-36dd-4272-a3c0-50c5365c9368','76a57644-b08a-4ed8-9a88-5b7d7e969a8d'),columns:('5938181c-36dd-4272-a3c0-50c5365c9368':(dataType:string,isBucketed:!t,label:'Top%20values%20of%20colour.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:'76a57644-b08a-4ed8-9a88-5b7d7e969a8d',type:column),orderDirection:desc,otherBucket:!t,size:20),scale:ordinal,sourceField:colour.keyword),'76a57644-b08a-4ed8-9a88-5b7d7e969a8d':(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!('5938181c-36dd-4272-a3c0-50c5365c9368'),layerId:b97b8442-8927-42df-92c9-581e36093cc0,layerType:data,legendDisplay:default,metric:'76a57644-b08a-4ed8-9a88-5b7d7e969a8d',nestedLegend:!f,numberDisplay:percent)),shape:donut)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:15,i:'0a8ea4c2-5af2-4e2e-9b10-eafa71241563',w:14,x:0,y:43),panelIndex:'0a8ea4c2-5af2-4e2e-9b10-eafa71241563',title:Color,type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-912de471-7437-4600-9421-54e5bf5adbc4,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('912de471-7437-4600-9421-54e5bf5adbc4':(columnOrder:!(b5e87064-fe09-4f99-be61-d7a0f52fbc35,'3ff79673-61f7-40dd-8fdf-878381f11b90'),columns:('3ff79673-61f7-40dd-8fdf-878381f11b90':(dataType:number,isBucketed:!f,label:'Count%20of%20records',operationType:count,scale:ratio,sourceField:Records),b5e87064-fe09-4f99-be61-d7a0f52fbc35:(dataType:string,isBucketed:!t,label:'Top%20values%20of%20listing_status.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:'3ff79673-61f7-40dd-8fdf-878381f11b90',type:column),orderDirection:desc,otherBucket:!t,size:5),scale:ordinal,sourceField:listing_status.keyword)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!(b5e87064-fe09-4f99-be61-d7a0f52fbc35),layerId:'912de471-7437-4600-9421-54e5bf5adbc4',layerType:data,legendDisplay:default,metric:'3ff79673-61f7-40dd-8fdf-878381f11b90',nestedLegend:!f,numberDisplay:percent)),shape:donut)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:15,i:a096af53-3aae-4f0a-b35e-f2b17d04ea2f,w:16,x:14,y:43),panelIndex:a096af53-3aae-4f0a-b35e-f2b17d04ea2f,title:'Listing%20Status',type:lens,version:'7.16.2'),(embeddableConfig:(attributes:(references:!((id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-current-indexpattern,type:index-pattern),(id:'7daabd60-9432-11ec-b15b-83c1e2f2c818',name:indexpattern-datasource-layer-13581313-83e9-4e26-ac17-102e30a1cf75,type:index-pattern)),state:(datasourceStates:(indexpattern:(layers:('13581313-83e9-4e26-ac17-102e30a1cf75':(columnOrder:!(df4829bd-2acc-4605-8d4b-3f9f1c530d3a,c396c563-243e-40d1-98ff-715c28634d6c),columns:(c396c563-243e-40d1-98ff-715c28634d6c:(dataType:number,isBucketed:!f,label:'Median%20of%20qty',operationType:median,scale:ratio,sourceField:qty),df4829bd-2acc-4605-8d4b-3f9f1c530d3a:(dataType:string,isBucketed:!t,label:'Top%20values%20of%20sku.keyword',operationType:terms,params:(missingBucket:!f,orderBy:(columnId:c396c563-243e-40d1-98ff-715c28634d6c,type:column),orderDirection:desc,otherBucket:!t,size:25),scale:ordinal,sourceField:sku.keyword)),incompleteColumns:())))),filters:!(),query:(language:kuery,query:''),visualization:(layers:!((categoryDisplay:default,groups:!(df4829bd-2acc-4605-8d4b-3f9f1c530d3a),layerId:'13581313-83e9-4e26-ac17-102e30a1cf75',layerType:data,legendDisplay:default,metric:c396c563-243e-40d1-98ff-715c28634d6c,nestedLegend:!f,numberDisplay:percent)),shape:pie)),title:'',type:lens,visualizationType:lnsPie),enhancements:(),hidePanelTitles:!f),gridData:(h:15,i:'70be8a48-3da6-4491-9761-59a6fded0c9d',w:18,x:30,y:43),panelIndex:'70be8a48-3da6-4491-9761-59a6fded0c9d',title:SKU,type:lens,version:'7.16.2'),(embeddableConfig:(enhancements:()),gridData:(h:15,i:'33c4fb21-43a3-4405-8108-0a497be93bc7',w:48,x:0,y:58),id:'2a6a5800-9436-11ec-b15b-83c1e2f2c818',panelIndex:'33c4fb21-43a3-4405-8108-0a497be93bc7',type:search,version:'7.16.2')),query:(language:kuery,query:''),tags:!(),timeRestore:!f,title:'Channel%20Products',viewMode:view)&_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:now-1y,to:now))&show-query-input=true&show-time-filter=true&hide-filter-bar=true";
  constructor(private appTrackingService:AppTrackingService,public _sanitizer: DomSanitizer) {
    let userdetails = localStorage.getItem('userId');
    if (userdetails != null) {
      this.url = this.url.replace('(khub_user_id:2358)', '(khub_user_id:' + userdetails + ')');
      this.loaded = true;
      this.urlSafe = this._sanitizer.bypassSecurityTrustResourceUrl(this.url);
    }
    let ip:usertrackInput={menu:TrackMenus.AIDASHBOARD,submenu:subMenus.AIPRODUCTS,page:pages.AIPRODUCTSDASHBOARDPAGE,function:"",descrption:"AI Products Dashboard page loaded"};
    this.appTrackingService.trackUserActivity(ip);
  }

  ngOnInit(): void {

  }

  photoURL() {
    // return this._sanitizer.bypassSecurityTrustUrl(this.url);
    return this._sanitizer.sanitize(SecurityContext.URL, this.url)
  }


}
