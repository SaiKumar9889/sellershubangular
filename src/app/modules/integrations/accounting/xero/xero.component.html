<div class="row m-t-20">
    <div class="col-md-12">
        <app-apploader [Uloading]="loading" *ngIf="loading"></app-apploader>
        <div class="portlet transparent">
            <div class="portlet box blue">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-book fas ml-4 mr-2"></i>Manage Accounting Settings
                    </div>
                    <div class="actions">

                    </div>
                </div>

                <div class="portlet-body">
                    <div class="portlet transparent">
                        <div class="portlet-title">
                            <div class="caption">
                                <img style="height:50px;"
                                    src="https://s3-us-west-1.amazonaws.com/khubweb/web/kartzhubxero.png">
                            </div>
                            <div class="actions">
                                <button (click)="savexero()" class="btn btn-success btn-sm mr-1">Save</button>
                                <button (click)="downloadOrders()" class="btn btn-success btn-sm mr-1"
                                    data-container="body" data-placement="top" data-html="true"
                                    data-original-title="Test Connection">Download Values From Xero</button>
                                <button (click)="testconnection()" class="btn btn-success btn-sm mr-1"
                                    data-container="body" data-placement="top" data-html="true"
                                    data-original-title="Test Connection">Test Connection</button>
                                <!-- <button (click)="uploadToXero()" class="btn btn-success btn-sm" data-container="body"
                                    data-placement="top" data-html="true" data-original-title="Test Connection">Send
                                    Order Invoices to Xero</button> -->
                                <button  (click)="closeIntegration()" class="btn btn-danger btn-sm ml-1">Close</button>
                            </div>
                        </div>

                        <div class="portlet-body form">
                            <div class="">
                                <h4>Please click on "Connect to Xero" Button to fill the following fields</h4>&nbsp;
                                <div class="col-md-12">
                                    <form class="form-horizontal" role="form">

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group row">
                                                    <label class="col-md-4 control-label text-right mt-1"
                                                        style="font-weight: bold;">Xero Connection</label>
                                                    <div class="col-md-8">
                                                        <button *ngIf="isNewIntegration" (click)="connectToxero()"
                                                            type="submit" class="btn btn-success btn-sm m-r-10">
                                                            Connect to Xero</button>
                                                        <button *ngIf="!isNewIntegration" type="submit" (click)="onDisconnect()"
                                                            class="btn btn-danger btn-sm m-r-10">Disconnect</button>
                                                        <button *ngIf="!isNewIntegration" type="submit" (click)="onReconnect()"
                                                            class="btn btn-info btn-sm">Re-Connect</button>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="row" *ngIf="!isNewIntegration">
                                            <div class="col-md-12">
                                                <div class="form-group row">
                                                    <label class="col-md-4 control-label text-right mt-1"
                                                        style="font-weight: bold;">Connected Xero Organisation</label>
                                                    <div class="col-md-4">
                                                        <select id="currencyid" class="form-control">
                                                            <option value="{{account.Code}}"
                                                            *ngFor="let account of accounts">{{account.Name}}</option>
                                                        </select>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group row">
                                                    <label class="col-md-4 control-label text-right mt-1"
                                                        style="font-weight: bold;">Invoice Status when creating new
                                                        invoices from SellersHub</label>
                                                    <div class="col-md-4">
                                                        <select id="currencyid" class="form-control" (change)="onSelectInvoice($event.target.value)"
                                                        [(ngModel)]="InvoiceStatus" [ngModelOptions]="{standalone: true}">
                                                            <option value="">Please Select</option>
                                                            <option value="SUBMITTED">SUBMITTED</option>
                                                            <option value="AUTHORIZED">AUTHORIZED</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> -->
                                    </form>
                                </div>
                                <h4>&nbsp;</h4>
                                <h4>Please select channels to enable for Xero Integration</h4>
                                <div class="table-scrollable mt-3">
                                    <table class="table table-striped table-bordered">
                                        <thead class="text-center">
                                            <tr>
                                                <th>Enable</th>
                                                <th>Channel</th>
                                                <th>Invoice Account</th>
                                                <th>Deposit To</th>
                                                <th>Tax Code (Sales)</th>
                                                <th>Tracking Categories</th>
                                            </tr>
                                        </thead>
                                        <tbody class="text-center">

                                            <tr *ngFor="let channel of allChannel">
                                                <td>
                                                    <div class="custom-control custom-checkbox">
                                                        <input (click)="individualselection(channel)"
                                                            [checked]="channel.selected" type="checkbox"
                                                            [id]="'id' + channel.id" [value]="channel.selected"
                                                            [name]="'test' + channel.name"
                                                            class="custom-control-input checkallP">
                                                        <label class="custom-control-label"
                                                            for="id{{channel.id}}"></label>
                                                    </div>
                                                </td>
                                                <td><img class="prod-img card-img-top img-responsive"
                                                        src="https://s3-us-west-1.amazonaws.com/khubweb/web/kartzhub{{ channel.type }}.png"
                                                        alt="Card image cap">
                                                    <br>
                                                    {{channel.name}}
                                                </td>
                                                <td>
                                                    <select (change)="onSelectPayment($event.target.value)"
                                                        [id]="channel.name" class="form-control custom-select"
                                                        [(ngModel)]="channel.PaymentID" [ngModelOptions]="{standalone: true}">
                                                        <option value="">Please select</option>
                                                        <option value="{{method.Code}}"
                                                            *ngFor="let method of paymentTypes">{{method.Name}}
                                                        </option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <select (change)="onSelectAccount($event.target.value)"
                                                        [id]="channel.name" class="form-control custom-select"
                                                        [(ngModel)]="channel.Code" [ngModelOptions]="{standalone: true}">
                                                        <option value="">Please select</option>
                                                        <option value="{{account.Code}}"
                                                            *ngFor="let account of accounts">{{account.Name}}</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <select (change)="onSelectTax($event.target.value)"
                                                        [id]="channel.name" class="form-control custom-select"
                                                        [(ngModel)]="channel.TaxType" [ngModelOptions]="{standalone: true}">
                                                        <option value="">Please select</option>
                                                        <option value="{{tax.TaxType}}" *ngFor="let tax of taxRates">
                                                            {{tax.Name}}</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <select (change)="onSelectTrackingCategories($event.target.value)"
                                                        [id]="channel.name" class="form-control custom-select"
                                                        [(ngModel)]="channel.TrackingOptionID" [ngModelOptions]="{standalone: true}">
                                                        <option value="">Please select</option>
                                                        <option value="{{track.TrackingOptionID}}"
                                                            *ngFor="let track of TrackingCategories">{{track.Name}}
                                                        </option>


                                                    </select>

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>