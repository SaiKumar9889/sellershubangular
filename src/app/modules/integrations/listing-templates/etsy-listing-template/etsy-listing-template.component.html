<div class="portlet box ">
  <div class="portlet-body">
    <div class="col-md-12 col-lg-12 text-right m-b-10">
      <a title="Description"
        href="https://www.sellershub.io/userguide/user-guide/listing-management/how-to-create-etsy-listing-template/"
        target="_blank" data-close-others="true"
        class="mt-3 mr-1 mb-3 btn-sm m-l-15 btn btn-dark btn-circle text-white"><i class=" fas fa-info"></i> </a>
      <button type="button" *ngIf="!isEditTemplate" (click)="newTemplateObj()" class="btn btn-primary mr-1">
        <i class="fa fa-times-circle-o"></i>New Template
      </button>
      <button type="button" *ngIf="!isEditTemplate" (click)="close()" class="btn btn-danger ng-star-inserted">
        <i class="fa fa-times font-red"></i> Close </button>
      <button type="button" *ngIf="isEditTemplate" (click)="update()" class="btn btn-primary mr-1 btn-success">
        Update
      </button>

    </div>
    <div id="etsylistingtemplatediv1" class="table-scrollable" *ngIf="!(newTemplate|| isEditTemplate)">
      <div class="col-md-12">
        <app-apploader [Uloading]="loading" *ngIf="loading"></app-apploader>
        <table class="table tableFixHead table-hover order-column v2 table-bordered">
          <thead>
            <tr>
              <th>
                Name
              </th>
              <th>
                Modified Date
              </th>
              <th>
                Action
              </th>
            </tr>
          </thead>
          <tbody *ngIf="templates?.length>0">
            <tr *ngFor="let item of templates">
              <td> {{item.templateName}}</td>
              <td> {{item.modifiedDate | date:short}}</td>
              <td>
                <button class="btn btn-sm btn-success btn-circle-new" (click)="editTemplate(item)">Edit</button>
                <button class="btn btn-sm btn-danger btn-circle-new" (click)="removeTemplate(item)">Remove</button>
              </td>
            </tr>
          </tbody>

        </table>
      </div>
    </div>

    <div id="etsylistingtemplatediv2" class="m-t-20" *ngIf="newTemplate || isEditTemplate">

      <h5>Please enter Etsy Listing Profile details</h5>

      <div class="portlet-body form">
        <form class="" role="form">
          <div class="form-body">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group has-success">
                  <label>Template Name</label>
                  <input type="text" name="templatename" class="form-control" [(ngModel)]="templateModel.name"
                    placeholder="Enter Template Name">
                </div>

                <div class="form-group has-success">
                  <label>Please Select a Shipping Profile</label>
                  <select class="form-control" id="shippingProfileId">
                    <option value="-1">Please select
                    </option>
                  </select>
                </div>
                <div class="form-group has-success">
                  <label>Etsy Category Id</label>
                  <div class="input-group">
                    <input type="text" value="" class="form-control" id="etsycategoryid"
                      [(ngModel)]="templateModel.categoryId" name="caterrs" placeholder="Enter Category Id">
                    <span class="input-group-btn">
                      <a>
                        <button class="btn-xs" type="button" (click)="openetsCategories()">Categories</button>
                      </a>
                    </span>
                  </div>
                </div>
                <div class="form-group has-success">
                  <label>Etsy Store Category (Section)</label>

                  <div class="input-group">
                    <input type="text" value="" class="form-control" id="storeCategoryId"
                      placeholder="Store Category Id">
                    <span class="input-group-btn">
                      <a>
                        <button class="btn-xs" type="button" (click)="openCategories()">Categories</button>
                      </a>
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group has-success">
                  <div class="alert alert-warning">
                    Shipping Profile must be created in Etsy
                    before listing from Sellershub.
                    Currently Etsy API does not support
                    calculated shipping when creating
                    listing. Please follow the below article
                    to list items with
                    calculated shipping
                    <a target="_blank" href="https://http://www.sellershub.io/">Help</a>
                  </div>
                </div>
                <div class="form-group has-success">
                  <label>Who Made</label>
                  <div>
                    <select class="form-control" name="who" [(ngModel)]="templateModel.who_made" data-field="who_made"
                      id="who_made">
                      <option value="">Who made it?
                      </option>
                      <optgroup label="Select a maker">
                        <option value="i_did">I
                          did</option>
                        <option value="collective">
                          A member of my
                          shop</option>
                        <option value="someone_else">
                          Another company
                          or person
                        </option>
                      </optgroup>
                    </select>
                  </div>
                </div>

                <div class="form-group has-success">
                  <label>What is it?</label>
                  <div>

                    <select class="form-control" name="what" [(ngModel)]="templateModel.what_is_it"
                      data-field="what_is_it" id="what_is_it">
                      <option value="">What is it?
                      </option>
                      <optgroup label="Select a use">
                        <option value="a_finihsed_product">
                          A Finished
                          Product</option>
                        <option value="a_supply_or_tool">
                          A Supply or Tool
                        </option>
                      </optgroup>
                    </select>



                  </div>
                </div>

                <div class="form-group has-success">
                  <label> When Made</label>
                  <div>
                    <select class="form-control" name="when" [(ngModel)]="templateModel.when_made"
                      data-field="when_made" id="when_made">
                      <option value="">
                        When was it made?
                      </option>

                      <option value="made_to_order">
                        Made To Order</option>
                      <option value="2020_2020">2020 -
                        2020</option>
                      <option value="2010_2019">2010 -
                        2019</option>
                      <option value="2001_2009">2001 -
                        2009</option>
                      <option value="before_2001">
                        Before 2001</option>
                      <option value="2000_2000">2000 -
                        2000</option>
                      <option value="1990s">1990s
                      </option>
                      <option value="1980s">1980s
                      </option>
                      <option value="1970s">1970s
                      </option>
                      <option value="1960s">1960s
                      </option>
                      <option value="1950s">1950s
                      </option>
                      <option value="1940s">1940s
                      </option>
                      <option value="1930s">1930s
                      </option>
                      <option value="1920s">1920s
                      </option>
                      <option value="1910s">1910s
                      </option>
                      <option value="1900s">1900s
                      </option>
                      <option value="1800s">1800s
                      </option>
                      <option value="1700s">1700s
                      </option>
                      <option value="before_1700">
                        Before 1700</option>
                    </select>
                  </div>
                </div>

                <div class="form-group has-success">
                  <label>Automatically Renew Listings?</label>
                  <input type="checkbox" [(ngModel)]="templateModel.automaticallyrenew" name="first"
                    id="automaticallyrenewlisting">
                </div>


                <div class="form-group has-success">
                  <label>Append SKU in Title?</label>
                  <input type="checkbox" [(ngModel)]="templateModel.appendSku" name="ssss" id="appendskuinttitle">
                </div>

              </div>
            </div>


          </div>



        </form>
      </div>

      <div class="row" *ngIf="newTemplate">
        <div class="col-md-12">
          <div class="pull-right">
            <button type="submit" class="btn btn-sm btn-circle-new btn-success"
              (click)="saveEtsyTemplate()">Save</button>
            <button type="button" class="btn btn-sm btn-circle-new btn-danger btn-default">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="modal in" id="categorywindow" tabindex="-1" role="basic" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="caption alert alert-warning">
        <h4>Manage Etsy Categories</h4>
      </div>

      <div class="modal-body">
        <h4>Please select an Etsy Category</h4>
        <div class="form-group has-success">
          <select class="form-control" id="catlevel0select" [(ngModel)]="selectedFirstCategory">
            <option value="-1" selected="">Please select</option>
            <option *ngFor="let item of categories" [ngValue]="item"> {{ item.name}}</option>
          </select>
        </div>

        <div id="etsycatlevel1">
          <div class="form-group has-success">
            <select class="form-control" id="catlevel1select" [(ngModel)]="selectedSecond">
              <option selected="" value="-1">Please select</option>
              <option *ngFor="let item of selectedFirstCategory?.children" [ngValue]="item"> {{ item.name}}</option>
            </select>
          </div>
        </div>

        <div id="etsycatlevel2">
          <div class="form-group has-success">
            <select class="form-control" id="catlevel2select" [(ngModel)]="latestCategoryObj" name="categoryId">
              <option value="-1" selected>Please select</option>
              <option *ngFor="let item of selectedSecond?.children" [ngValue]="item"> {{ item.name}}</option>
            </select>
          </div>

        </div>


      </div>
      <div class="modal-footer">
        <a (click)="setCategory()" type="button" class="btn btn-xs btn-success"><i class="fa fa-check"></i> Select</a>
        <button type="button" class="btn btn-xs btn-danger" data-dismiss="modal"><i class="fa fa-times"></i>
          Close</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>


</div>


<div class="modal fade bs-modal-lg in" id="categorywindow2" tabindex="-1" role="basic" aria-hidden="true">


  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="caption alert alert-warning">
        <h4>Manage Etsy Store Category/Section</h4>
      </div>
      <div class="modal-body">
        <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button> -->
        <h4>Please select an Etsy Store Category/Section</h4>
        <div class="form-group has-success">
          <select class="form-control" id="etsystorectegoriesid" [(ngModel)]="templateModel.storeCategoryId"
            name="storecategorid">
            <option value="-1">Please select</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-sm  btn-circle-new red-mint btn-danger" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-sm btn-circle-new blue btn-success">Select</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>


</div>